(function(){"use strict";var e={2823:function(e,t,a){e.exports=a.p+"img/rainbow-folder.e49409a1.png"},6298:function(e,t,a){var l=a(5130),o=a(6768);function s(e,t,a,l,s,n){const i=(0,o.g2)("app-toaster"),r=(0,o.g2)("app-dialog"),c=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(i),(0,o.bF)(r),(0,o.bF)(c)],64)}var n=a(144),i=a(782),r=a(5931),c=a(4232);const d={class:"toast-container"},u={class:"toast-icon"},p={class:"toast-message"},g=["onClick"];function v(e,t,a,s,n,i){const r=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.Wv)(o.Im,{to:"body"},[(0,o.Lk)("div",d,[(0,o.bF)(l.F,{name:"toast",tag:"div"},{default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.toasts,t=>((0,o.uX)(),(0,o.CE)("div",{id:"toastTest",key:t.id,class:(0,c.C4)(["toast",t.severity])},[(0,o.Lk)("span",u,[(0,o.bF)(r,{icon:e.iconClass(t.severity)},null,8,["icon"])]),(0,o.Lk)("span",p,(0,c.v_)(e.t(t.message)),1),(0,o.Lk)("div",{class:"toast-progress",style:(0,c.Tr)({animationDuration:t.duration+"ms"})},null,4),(0,o.Lk)("div",{class:"toast-delete",onClick:a=>e.deleteToast(t.id)},[(0,o.bF)(r,{icon:["fas","times-circle"]})],8,g)],2))),128))]),_:1})])])}var m=(0,o.pM)({setup(){const{t:e}=(0,r.s9)(),t=(0,i.Pj)(),a=(0,o.EW)(()=>t.getters["toast/getToasts"]),l=e=>{t.dispatch("toast/deleteToast",{id:e})},s=e=>{switch(e){case"success":return["fas","check-circle"];case"error":return["fas","times-circle"];case"info":return["fas","info-circle"];case"warning":return["fas","exclamation-triangle"];default:return["fas","times-circle"]}};return{toasts:a,iconClass:s,deleteToast:l,t:e}}}),h=a(1241);const f=(0,h.A)(m,[["render",v],["__scopeId","data-v-3a48c8ba"]]);var y=f;const k=["onClick"];function b(e,t,a,s,n,i){return(0,o.uX)(),(0,o.Wv)(o.Im,{to:"body"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.dialogsSt.dialogs,t=>((0,o.uX)(),(0,o.CE)("div",{key:t.id,class:(0,c.C4)(["dialog-backdrop",{"dialog-backdrop-transparent":t.options?.transparent}]),onClick:(0,l.D$)(a=>e.close(t.id),["self"])},[((0,o.uX)(),(0,o.Wv)((0,o.$y)(t.component),(0,o.v6)({ref_for:!0},t.props,{onResolve:a=>{t.resolve(a),e.close(t.id)},onReject:a=>{t.reject(a),e.close(t.id)},onClose:a=>e.close(t.id)}),null,16,["onResolve","onReject","onClose"]))],10,k))),128))])}a(4114),a(8111),a(2489);let C=0;const w=(0,n.Kh)({dialogs:[]});function E(e,t={},a){return new Promise((l,o)=>{const s=++C;w.dialogs.push({id:s,component:e,props:t,resolve:l,reject:o,options:a})})}function I(e){w.dialogs=w.dialogs.filter(t=>t.id!==e)}var L=(0,o.pM)({setup(){const e=w,t=I;return{dialogsSt:e,close:t}}});const M=(0,h.A)(L,[["render",b],["__scopeId","data-v-c2b2f8e4"]]);var F=M,_=(0,o.pM)({components:{AppDialog:F,AppToaster:y},setup(){const e=(0,n.KR)(document.documentElement.clientWidth),t=(0,i.Pj)(),{locale:a}=(0,r.s9)();t.dispatch("theme/initTheme"),t.dispatch("language/initLanguage"),(0,o.wB)(()=>t.getters["language/language"],e=>{a.value=e},{immediate:!0});const l=()=>{e.value=document.documentElement.clientWidth,t.dispatch("mobile/setClientWidth",{clientWidth:e.value})};(0,o.sV)(()=>{t.dispatch("mobile/setClientWidth",{clientWidth:e.value}),window.addEventListener("resize",l)}),(0,o.xo)(()=>{window.removeEventListener("resize",l)})}});const R=(0,h.A)(_,[["render",s]]);var S=R,T=(a(3579),a(1387)),A=a.p+"img/rainbow.defa200a.svg";const x={class:"container"},P={class:"header-section"},W={class:"app-dropdown"};function K(e,t,a,l,s,n){const i=(0,o.g2)("app-toggle"),r=(0,o.g2)("app-option"),d=(0,o.g2)("app-dropdown"),u=(0,o.g2)("app-header"),p=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",x,[(0,o.bF)(u,null,{default:(0,o.k6)(()=>[(0,o.Lk)("section",P,[t[2]||(t[2]=(0,o.Lk)("img",{src:A,alt:"App Logo",width:"32",height:"32"},null,-1)),(0,o.Lk)("section",null,[(0,o.bF)(i,{modelValue:e.isDark,"onUpdate:modelValue":t[0]||(t[0]=t=>e.isDark=t),variant:"theme",onToggled:e.toggled},null,8,["modelValue","onToggled"]),(0,o.Lk)("div",W,[(0,o.bF)(d,{modelValue:e.language,"onUpdate:modelValue":t[1]||(t[1]=t=>e.language=t),label:"name"},{default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.languages,e=>((0,o.uX)(),(0,o.Wv)(r,{key:e,value:e},{default:(0,o.k6)(()=>[(0,o.eW)((0,c.v_)(e),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])])]),_:1}),(0,o.bF)(p)])}const D=["aria-disabled"],X=["checked","disabled"];function B(e,t,a,s,n,i){return(0,o.uX)(),(0,o.CE)("label",{ref:"switchEl",class:(0,c.C4)([[e.variant,{disabled:e.disabled}],"switch"]),tabindex:"0","aria-disabled":e.disabled,onKeydown:[t[1]||(t[1]=(0,l.jR)((0,l.D$)((...t)=>e.onKeyToggle&&e.onKeyToggle(...t),["prevent"]),["space"])),t[2]||(t[2]=(0,l.jR)((0,l.D$)((...t)=>e.onKeyToggle&&e.onKeyToggle(...t),["prevent"]),["enter"]))]},[(0,o.Lk)("input",{type:"checkbox",checked:e.modelValue,disabled:e.disabled,onChange:t[0]||(t[0]=(...t)=>e.onToggle&&e.onToggle(...t))},null,40,X),t[3]||(t[3]=(0,o.Lk)("span",{class:"slider"},null,-1))],42,D)}function V(e,t){const a=(0,n.KR)(null),l=e=>{const a=e.target;t("update:modelValue",a.checked),t("toggled",a.checked)},s=()=>{e.disabled||(t("update:modelValue",!e.modelValue),t("toggled",!e.modelValue))};return(0,o.sV)(()=>{!e.disabled&&a.value&&a.value.focus()}),{onToggle:l,onKeyToggle:s,switchEl:a}}var U=(0,o.pM)({props:{modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},variant:{type:String,default:"default"}},emits:["update:modelValue","toggled"],setup(e,t){return V(e,t.emit)}});const O=(0,h.A)(U,[["render",B],["__scopeId","data-v-4d8e97e2"]]);var G=O;const z={class:"header"};function Q(e,t){return(0,o.uX)(),(0,o.CE)("header",z,[(0,o.RG)(e.$slots,"default",{},void 0,!0)])}const j={},H=(0,h.A)(j,[["render",Q],["__scopeId","data-v-bea2ffe6"]]);var N=H;const $=["disabled"],Y={key:0,class:"search"};function q(e,t,a,l,s,n){const i=(0,o.g2)("app-input"),r=(0,o.g2)("app-overlay-panel");return(0,o.uX)(),(0,o.CE)("section",null,[(0,o.Lk)("div",{ref:"targetRef",class:"dropdown-container",onClick:t[3]||(t[3]=(...t)=>e.toggle&&e.toggle(...t))},[(0,o.bF)(i,{modelValue:e.valueRef,"onUpdate:modelValue":t[0]||(t[0]=t=>e.valueRef=t),height:e.height,"is-label":e.isTitle,readonly:!0,disabled:e.disabled,label:e.title},null,8,["modelValue","height","is-label","disabled","label"]),(0,o.Lk)("button",{disabled:e.disabled,type:"button",class:(0,c.C4)(["toggle-btn",{withTitle:e.isTitle}])}," ▼ ",10,$),e.targetRef?((0,o.uX)(),(0,o.Wv)(r,{key:0,visible:e.visible,"onUpdate:visible":t[2]||(t[2]=t=>e.visible=t),target:e.targetRef},{default:(0,o.k6)(()=>[e.isSearch?((0,o.uX)(),(0,o.CE)("div",Y,[(0,o.bF)(i,{modelValue:e.searchValue,"onUpdate:modelValue":t[1]||(t[1]=t=>e.searchValue=t),placeholder:"search",icon:["fas","search"],"is-label":!1},null,8,["modelValue"])])):(0,o.Q3)("",!0),(0,o.RG)(e.$slots,"default",{},void 0,!0)]),_:3},8,["visible","target"])):(0,o.Q3)("",!0)],512)])}const J=["for"],Z={ref:"wrapperRef",class:"wrap-input validate-input"},ee=["id","value","type","placeholder","disabled","readonly"],te={key:0,class:"symbol-input100"};function ae(e,t,a,l,s,n){const i=(0,o.g2)("font-awesome-icon"),r=(0,o.g2)("app-input-error-overlay");return(0,o.uX)(),(0,o.CE)("section",null,[e.isLabel?((0,o.uX)(),(0,o.CE)("label",{key:0,class:"label",for:e.type},(0,c.v_)(e.t(e.label)),9,J)):(0,o.Q3)("",!0),(0,o.Lk)("div",Z,[(0,o.Lk)("input",{id:e.type,ref:"inputRef",value:e.modelValue,class:(0,c.C4)(["input100",{pr:e.icon}]),type:e.type,placeholder:e.t(e.placeholder),disabled:e.disabled,readonly:e.readonly,style:(0,c.Tr)({height:e.height}),onInput:t[0]||(t[0]=(...t)=>e.handleInput&&e.handleInput(...t)),onBlur:t[1]||(t[1]=(...t)=>e.handleBlur&&e.handleBlur(...t)),onFocus:t[2]||(t[2]=(...t)=>e.showErrorToggle&&e.showErrorToggle(...t))},null,46,ee),t[3]||(t[3]=(0,o.Lk)("span",{class:"focus-input100"},null,-1)),e.icon?((0,o.uX)(),(0,o.CE)("span",te,[(0,o.bF)(i,{icon:e.icon},null,8,["icon"])])):(0,o.Q3)("",!0)],512),e.wrapperRef?((0,o.uX)(),(0,o.Wv)(r,{key:1,target:e.wrapperRef,message:e.error,visible:e.showError,"z-index":e.zIndexTooltip,onClick:e.showErrorToggle},null,8,["target","message","visible","z-index","onClick"])):(0,o.Q3)("",!0)])}const le={class:"error-message"};function oe(e,t,a,l,s,n){return(0,o.uX)(),(0,o.Wv)(o.Im,{to:"body"},[e.visible?((0,o.uX)(),(0,o.CE)("div",{key:0,ref:"overlayRef",class:"error-overlay",style:(0,c.Tr)(e.overlayStyle),onClick:t[0]||(t[0]=(...t)=>e.onClick&&e.onClick(...t))},[(0,o.Lk)("section",null,[(0,o.Lk)("div",le,(0,c.v_)("string"===typeof e.message?e.t(e.message):e.t(e.message.key,e.message.values)),1),t[1]||(t[1]=(0,o.Lk)("div",{class:"exclamation-mark"},"!",-1))])],4)):(0,o.Q3)("",!0)])}const se=7.5,ne=1.5;var ie=(0,o.pM)({props:{target:{type:Object,required:!0},message:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},zIndex:{type:Number,default:1010}},emits:["click"],setup(e,{emit:t}){const{t:a}=(0,r.s9)(),l=(0,n.KR)(null),s=(0,n.KR)(0),i=(0,o.EW)(()=>{if(s.value,!e.target)return{};const t=e.target.getBoundingClientRect();return{position:"absolute",top:`${t.top+window.scrollY+se}px`,left:`${t.left+window.scrollX+Math.round(t.width/3.5)}px`,width:t.width/ne+"px",zIndex:e.zIndex}}),c=()=>{s.value=Date.now()},d=()=>{t("click")};return(0,o.sV)(()=>{window.addEventListener("resize",c),window.addEventListener("scroll",c,!0)}),(0,o.xo)(()=>{window.removeEventListener("resize",c),window.removeEventListener("scroll",c,!0)}),{overlayRef:l,overlayStyle:i,onClick:d,t:a}}});const re=(0,h.A)(ie,[["render",oe],["__scopeId","data-v-456e7f20"]]);var ce=re,de=(0,o.pM)({components:{AppInputErrorOverlay:ce},props:{modelValue:{type:String,default:""},error:{type:[String,Boolean],default:""},isLabel:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},placeholder:{type:String,default:""},type:{type:String,default:"text"},label:{type:String,default:"text"},icon:{type:[Array,String],default:""},zIndexTooltip:{type:Number,default:1010},height:{type:String,default:"50px"},isFocused:{type:Boolean,default:!1}},emits:["update:modelValue","blur","change","focus"],setup(e,{emit:t}){const a=(0,n.KR)(""),{t:l}=(0,r.s9)(),s=(0,n.KR)(!1),i=(0,n.KR)(!1),c=(0,n.KR)(null),d=(0,n.KR)(null),u=()=>{t("focus"),i.value=!0,c.value?.focus(),v()},p=()=>{t("blur"),i.value=!1,v()},g=e=>{t("update:modelValue",e.target.value),i.value=!0,v()},v=()=>{s.value=!i.value&&Boolean(e.error)};return(0,o.sV)(()=>{e.isFocused&&c.value?.focus()}),(0,o.wB)(()=>e.error,()=>{v()},{immediate:!0}),{value:a,showError:s,showErrorToggle:u,inputRef:c,wrapperRef:d,handleInput:g,handleBlur:p,t:l}}});const ue=(0,h.A)(de,[["render",ae],["__scopeId","data-v-45d99b04"]]);var pe=ue;function ge(e,t,a,l,s,n){return(0,o.uX)(),(0,o.Wv)(o.Im,{to:"body"},[e.visible?((0,o.uX)(),(0,o.CE)("div",{key:0,ref:"overlayRef",class:"overlay",style:(0,c.Tr)(e.overlayStyle)},[(0,o.RG)(e.$slots,"default",{},void 0,!0)],4)):(0,o.Q3)("",!0)])}const ve=3;function me(e,t){switch(t){case"left":return e.left;case"right":return e.right;case"center":return e.left+e.width/2}}function he(e,t){switch(t){case"top":return e.top;case"bottom":return e.bottom;case"center":return e.top+e.height/2}}function fe(e,t,a,l){const o=me(t,e),s=o-a>=0,n=o+a<=l,i=o-a/2>=0&&o+a/2<=l;return"left"===e?s?"left":i?"center":"right":"right"===e?n?"right":i?"center":"left":"center"}function ye(e,t,a,l){const o=he(t,e),s=o-a>=0,n=o+a<=l,i=o-a/2>=0&&o+a/2<=l;return"top"===e?s?"top":i?"center":"bottom":"bottom"===e?n?"bottom":i?"center":"top":i?"center":s?"top":"bottom"}function ke(e,t){let a;return a=null!==t?"number"===typeof t?`${t}px`:String(t):`${Math.round(e.width)}px`,a}function be(e,t,a,l,o){const s=document.documentElement.clientWidth,n=document.documentElement.clientHeight;return{x:fe(l,e,t,s),y:ye(o,e,a,n)}}var Ce=(0,o.pM)({props:{target:{type:Object,required:!0},visible:{type:Boolean,default:!0},zIndex:{type:Number,default:1010},position:{type:Object,default:()=>({x:"center",y:"bottom"})},width:{type:[Number,String],default:null}},emits:["update:visible"],setup(e,{emit:t}){const a=(0,n.KR)(null),l=(0,n.KR)(0),s=(0,o.EW)(()=>{if(l.value,!e.target)return{};const t=e.target.getBoundingClientRect(),o=a.value,s=window.scrollX,n=window.scrollY,i=o?.offsetWidth??0,r=o?.offsetHeight??0,{x:c,y:d}=be(t,i,r,e.position.x,e.position.y),u=d,p=c;let g=t.top+n,v=t.left+s,m=0,h=0;switch(u){case"top":g=t.top+n-r;break;case"bottom":g=t.top+n+t.height+ve;break;case"center":g=t.top+n+t.height/2,h=-50;break}switch(p){case"left":v=t.left+s-i;break;case"right":v=t.left+s+t.width;break;case"center":v=t.left+t.width/2,m=-50;break}const f=[];return m&&f.push(`translateX(${m}%)`),h&&f.push(`translateY(${h}%)`),{position:"fixed",top:`${Math.round(g)}px`,left:`${Math.round(v)}px`,transform:f.length?f.join(" "):void 0,zIndex:e.zIndex,width:ke(t,e.width)}}),i=()=>{l.value=Date.now()},r=l=>{const o=a.value,s=e.target,n=l.target;o&&!o.contains(n)&&s&&!s.contains(n)&&t("update:visible",!1)};return(0,o.sV)(()=>{window.addEventListener("resize",i),window.addEventListener("scroll",i,!0),document.addEventListener("click",r),(0,o.dY)(i)}),(0,o.xo)(()=>{window.removeEventListener("resize",i),window.removeEventListener("scroll",i,!0),document.removeEventListener("click",r)}),{overlayStyle:s,overlayRef:a}}});const we=(0,h.A)(Ce,[["render",ge],["__scopeId","data-v-512dbea3"]]);var Ee=we,Ie=(0,o.pM)({components:{AppOverlayPanel:Ee,AppInput:pe},props:{modelValue:{type:[String,Number,Object],default:null},label:{type:String,default:""},disabled:{type:Boolean,default:!1},height:{type:String,default:"32px"},isSearch:{type:Boolean,default:!1},isTitle:{type:Boolean,default:!1},title:{type:String,default:""}},emits:["update:modelValue","search"],setup(e,{emit:t}){const a=(0,o.EW)(()=>e.modelValue),l=(0,n.KR)(null),s=(0,n.KR)(null),i=(0,n.KR)(!1),r=(0,n.KR)(""),c=()=>{i.value=!i.value},d=a=>{if("string"===typeof a&&(l.value=a),"object"===typeof a&&null!==a){const t=a;l.value=t[e.label]}t("update:modelValue",a),i.value=!1};return(0,o.sV)(()=>{if("string"===typeof e.modelValue&&(l.value=e.modelValue),"object"===typeof e.modelValue&&null!==e.modelValue){const t=e.modelValue;l.value=t[e.label]}}),(0,o.Gt)("select",d),(0,o.Gt)("selected",a),(0,o.wB)(r,e=>{t("search",e)}),(0,o.wB)(()=>e.modelValue,t=>{l.value="string"===typeof t?t:"object"===typeof t&&null!==t?t[e.label]:null},{immediate:!0}),{targetRef:s,visible:i,toggle:c,valueRef:l,searchValue:r}}});const Le=(0,h.A)(Ie,[["render",q],["__scopeId","data-v-1d4abc9e"]]);var Me=Le;function Fe(e,t,a,l,s,n){return(0,o.uX)(),(0,o.CE)("div",{class:(0,c.C4)(["dropdown-option",{"is-selected":e.isSelected}]),onClick:t[0]||(t[0]=(...t)=>e.onClick&&e.onClick(...t))},[(0,o.RG)(e.$slots,"default",{},void 0,!0)],2)}var _e=(0,o.pM)({props:{value:{type:[String,Number,Object],default:null}},setup(e){const t=(0,o.WQ)("select",()=>{}),a=(0,o.WQ)("selected"),l=()=>{t&&t(e.value)},s=(0,o.EW)(()=>{if(!a)return;const t=a.value;if(t&&"object"===typeof t&&e.value&&"object"===typeof e.value){const a=t,l=e.value;return a.id===l.id}return t===e.value});return{onClick:l,isSelected:s}}});const Re=(0,h.A)(_e,[["render",Fe],["__scopeId","data-v-32a64d45"]]);var Se=Re,Te=(0,o.pM)({components:{AppOption:Se,AppDropdown:Me,AppHeader:N,AppToggle:G},setup(){const e=(0,i.Pj)(),t=(0,n.KR)(null),a=(0,n.KR)(!0),l=(0,n.KR)(["en","ru"]),s=(0,n.KR)(e.getters["language/language"]),r=(0,n.KR)(e.getters["theme/isDark"]),c=t=>{e.dispatch("theme/setTheme",t)};return(0,o.wB)(s,t=>{e.dispatch("language/setLanguage",{language:t})}),{toggled:c,isDark:r,containerRef:t,isVisible:a,language:s,languages:l}}});const Ae=(0,h.A)(Te,[["render",K]]);var xe=Ae,Pe=a.p+"img/img-01.65cd3f0f.png";const We={class:"container"},Ke={class:"wrap-login"},De={ref:"imageRef",src:Pe,alt:""},Xe={class:"login-form"},Be={class:"title"},Ve={class:"login-inputs"},Ue={class:"text-center"},Oe={class:"txt1"};function Ge(e,t,a,l,s,n){const i=(0,o.g2)("app-input"),r=(0,o.g2)("Field"),d=(0,o.g2)("app-button"),u=(0,o.g2)("VForm"),p=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("section",We,[(0,o.Lk)("div",Ke,[(0,o.Lk)("div",{class:"login-pic",onMousemove:t[0]||(t[0]=(...t)=>e.handleMouseMove&&e.handleMouseMove(...t)),onMouseleave:t[1]||(t[1]=(...t)=>e.resetTransform&&e.resetTransform(...t))},[(0,o.Lk)("img",De,null,512)],32),(0,o.Lk)("div",Xe,[(0,o.Lk)("h1",Be,(0,c.v_)(e.t("login")),1),(0,o.bF)(u,{"validation-schema":e.formGroup,onSubmit:e.onSubmit},{default:(0,o.k6)(()=>[(0,o.Lk)("section",Ve,[(0,o.bF)(r,{name:"email"},{default:(0,o.k6)(({field:a,meta:l,errorMessage:s})=>[(0,o.bF)(i,(0,o.v6)(a,{modelValue:e.email,"onUpdate:modelValue":t[2]||(t[2]=t=>e.email=t),placeholder:"example@gmail.com",label:"email",icon:["fas","envelope"],"z-index-tooltip":1020,error:l.touched?s:"",type:"email"}),null,16,["modelValue","error"])]),_:1}),(0,o.bF)(r,{name:"password"},{default:(0,o.k6)(({field:a,meta:l,errorMessage:s})=>[(0,o.bF)(i,(0,o.v6)(a,{modelValue:e.password,"onUpdate:modelValue":t[3]||(t[3]=t=>e.password=t),placeholder:"password",label:"password",type:"password",icon:["fas","lock"],error:l.touched?s:""}),null,16,["modelValue","error"])]),_:1})]),(0,o.bF)(d,{loading:e.loading,type:"submit",title:"login"},null,8,["loading"])]),_:1},8,["validation-schema","onSubmit"]),(0,o.Lk)("section",null,[(0,o.Lk)("div",Ue,[(0,o.Lk)("span",Oe,(0,c.v_)(e.t("forgot")),1),(0,o.bF)(p,{class:"txt2",to:{name:"forgot"}},{default:(0,o.k6)(()=>[(0,o.eW)((0,c.v_)(e.t("userName"))+" / "+(0,c.v_)(e.t("password"))+"? ",1)]),_:1})])])])])])}const ze={class:"container-btn"},Qe=["disabled"],je={key:0,class:"btn-icon"},He={key:1,class:"btn-title"},Ne={key:2,class:"loader"};function $e(e,t,a,l,s,n){const i=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)("div",ze,[(0,o.Lk)("button",{disabled:e.disabled||e.loading,class:(0,c.C4)(e.classes),onClick:t[0]||(t[0]=(...t)=>e.clickBtn&&e.clickBtn(...t))},[e.icon?((0,o.uX)(),(0,o.CE)("span",je,[(0,o.bF)(i,{size:"lg",icon:e.icon},null,8,["icon"])])):(0,o.Q3)("",!0),e.title&&!e.loading?((0,o.uX)(),(0,o.CE)("span",He,(0,c.v_)(e.t(e.title)),1)):e.loading?((0,o.uX)(),(0,o.CE)("span",Ne)):(0,o.Q3)("",!0)],10,Qe)])}var Ye=(0,o.pM)({props:{disabled:{type:Boolean,default:!1},title:{type:String,default:""},loading:{type:Boolean,default:!1},severity:{type:String,default:"success"},raised:{type:Boolean,default:!1},icon:{type:[Array,String],default:""}},emits:["click"],setup(e,{emit:t}){const{t:a}=(0,r.s9)(),l=(0,o.EW)(()=>["btn",`${e.severity}`,{raised:e.raised}]),s=()=>{t("click")};return{t:a,classes:l,clickBtn:s}}});const qe=(0,h.A)(Ye,[["render",$e],["__scopeId","data-v-e1884c18"]]);var Je=qe,Ze=a(9041),et=a(482),tt=(0,o.pM)({components:{Field:et.D0,VForm:et.lV,AppInput:pe,AppButton:Je},setup(){const e=(0,T.rd)(),t=(0,i.Pj)(),{t:a}=(0,r.s9)(),l=(0,n.KR)(null),s=(0,n.KR)(""),c=(0,n.KR)(""),d=(0,o.EW)(()=>t.getters["authFirebase/isLoading"]),u=Ze.Ik({email:Ze.Yj().required("validation.required").email("validation.required"),password:Ze.Yj().required("validation.required").min(6,{key:"validation.min",values:{count:6}})}),p=async a=>{try{await t.dispatch("authFirebase/login",a),await e.push("/main")}catch(l){console.error(l)}},g=e=>{const t=l.value;if(!t)return;const a=t.getBoundingClientRect(),o=e.clientX-a.left,s=e.clientY-a.top,n=a.width/2,i=a.height/2,r=(o-n)/n*10,c=-(s-i)/i*10;t.style.transform=`perspective(300px) rotateX(${c}deg) rotateY(${r}deg)`},v=()=>{l.value&&(l.value.style.transform="perspective(300px) rotateX(0deg) rotateY(0deg)")};return{formGroup:u,onSubmit:p,email:s,password:c,loading:d,imageRef:l,handleMouseMove:g,resetTransform:v,t:a}}});const at=(0,h.A)(tt,[["render",Ge],["__scopeId","data-v-1446709b"]]);var lt=at;function ot(e,t){return(0,o.uX)(),(0,o.CE)("div",null,"Forgot")}const st={},nt=(0,h.A)(st,[["render",ot]]);var it=nt;const rt={class:"container"},ct={class:"header-section"},dt={class:"app-dropdown"},ut={class:"sidebar-item"},pt={class:"icon"},gt={key:0,class:"title"},vt={class:"sidebar-item"},mt={class:"icon"},ht={key:0,class:"title"},ft={class:"sidebar-item"},yt={class:"icon"},kt={key:0,class:"title"},bt={class:"icon"},Ct={key:0,class:"title"},wt=["onClick"],Et={class:"main"};function It(e,t,a,l,s,n){const i=(0,o.g2)("app-toggle"),r=(0,o.g2)("app-option"),d=(0,o.g2)("app-dropdown"),u=(0,o.g2)("app-burger-menu"),p=(0,o.g2)("app-header"),g=(0,o.g2)("font-awesome-icon"),v=(0,o.g2)("router-link"),m=(0,o.g2)("app-sidebar"),h=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",rt,[(0,o.bF)(p,null,{default:(0,o.k6)(()=>[(0,o.Lk)("section",ct,[t[3]||(t[3]=(0,o.Lk)("img",{src:A,alt:"App Logo",width:"32",height:"32"},null,-1)),(0,o.Lk)("section",null,[(0,o.bF)(i,{modelValue:e.isDark,"onUpdate:modelValue":t[0]||(t[0]=t=>e.isDark=t),variant:"theme",onToggled:e.toggled},null,8,["modelValue","onToggled"]),(0,o.Lk)("div",dt,[(0,o.bF)(d,{modelValue:e.language,"onUpdate:modelValue":t[1]||(t[1]=t=>e.language=t),label:"name"},{default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.languages,e=>((0,o.uX)(),(0,o.Wv)(r,{key:e,value:e},{default:(0,o.k6)(()=>[(0,o.eW)((0,c.v_)(e),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),e.isMobile?((0,o.uX)(),(0,o.Wv)(u,{key:0})):(0,o.Q3)("",!0)])])]),_:1}),(0,o.Lk)("section",null,[(0,o.bF)(m,null,{main:(0,o.k6)(({isShort:t})=>[(0,o.bF)(v,{to:"/main/color","active-class":"active-link"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",ut,[(0,o.Lk)("div",pt,[(0,o.bF)(g,{size:"xl",icon:["fas","rainbow"]})]),t?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",gt,(0,c.v_)(e.t("colorType")),1))])]),_:2},1024),(0,o.bF)(v,{to:"/main/chroma","active-class":"active-link"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",vt,[(0,o.Lk)("div",mt,[(0,o.bF)(g,{size:"xl",icon:["fas","eye-dropper"]})]),t?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",ht,(0,c.v_)(e.t("characteristicColor")),1))])]),_:2},1024),(0,o.bF)(v,{to:"/main/gallery","active-class":"active-link"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",ft,[(0,o.Lk)("div",yt,[(0,o.bF)(g,{size:"xl",icon:["fas","images"]})]),t?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",kt,(0,c.v_)(e.t("gallery")),1))])]),_:2},1024)]),additional:(0,o.k6)(({isShort:a,toggle:l})=>[(0,o.Lk)("div",{class:"sidebar-item logout",onClick:t[2]||(t[2]=(...t)=>e.logout&&e.logout(...t))},[(0,o.Lk)("div",bt,[(0,o.bF)(g,{size:"xl",icon:["fas","right-from-bracket"]})]),a?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Ct,(0,c.v_)(e.t("logout")),1))]),e.isMobile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",{key:0,class:"sidebar-item",onClick:l},[(0,o.bF)(g,{size:"xl",icon:a?["fas","arrow-left"]:["fas","arrow-right"]},null,8,["icon"])],8,wt))]),_:1}),(0,o.Lk)("main",Et,[(0,o.bF)(h)])])])}const Lt={class:"additional-section"};function Mt(e,t,a,l,s,n){return!e.isMobile||e.isMobile&&e.isBurgerMenuOpen?((0,o.uX)(),(0,o.CE)("aside",{key:0,class:(0,c.C4)(["sidebar-container",{"mobile-view":e.isMobile}]),style:(0,c.Tr)({width:e.isShort?"60px":"220px"})},[(0,o.Lk)("section",{class:"main-section",onClick:t[0]||(t[0]=(...t)=>e.setBurgerMenu&&e.setBurgerMenu(...t))},[(0,o.RG)(e.$slots,"main",{isShort:e.isShort},void 0,!0)]),(0,o.Lk)("section",Lt,[(0,o.RG)(e.$slots,"additional",{isShort:e.isShort,toggle:e.toggle},void 0,!0)])],6)):(0,o.Q3)("",!0)}var Ft=(0,o.pM)({setup(){const e=(0,i.Pj)(),t=(0,n.KR)(!0),a=(0,o.EW)(()=>"mobile"===e.getters["mobile/breakPoint"]),l=(0,o.EW)(()=>e.getters["burgerMenu/isOpen"]),s=()=>{t.value=!t.value},r=()=>{a.value&&e.dispatch("burgerMenu/setBurger",{isOpen:!1})};return(0,o.wB)(()=>e.getters["mobile/breakPoint"],e=>{t.value="mobile"!==e},{immediate:!0}),{isMobile:a,isShort:t,toggle:s,isBurgerMenuOpen:l,setBurgerMenu:r}}});const _t=(0,h.A)(Ft,[["render",Mt],["__scopeId","data-v-87931dba"]]);var Rt=_t;function St(e,t,a,l,s,n){return(0,o.uX)(),(0,o.CE)("div",{"data-burger-test-id":"",class:(0,c.C4)(["burger",{open:e.isOpen}]),onClick:t[0]||(t[0]=(...t)=>e.toggle&&e.toggle(...t))},[...t[1]||(t[1]=[(0,o.Lk)("span",null,null,-1),(0,o.Lk)("span",null,null,-1),(0,o.Lk)("span",null,null,-1)])],2)}var Tt=(0,o.pM)({setup(){const e=(0,i.Pj)(),t=(0,o.EW)(()=>e.getters["burgerMenu/isOpen"]),a=()=>{e.dispatch("burgerMenu/setBurger",{isOpen:!t.value})};return{isOpen:t,toggle:a}}});const At=(0,h.A)(Tt,[["render",St],["__scopeId","data-v-13390ba1"]]);var xt=At,Pt=(0,o.pM)({components:{AppBurgerMenu:xt,AppSidebar:Rt,AppOption:Se,AppDropdown:Me,AppHeader:N,AppToggle:G},setup(){const{t:e}=(0,r.s9)(),t=(0,i.Pj)(),a=(0,T.rd)(),l=(0,n.KR)(null),s=(0,n.KR)(!0),c=(0,n.KR)(["en","ru"]),d=(0,n.KR)(t.getters["language/language"]),u=(0,n.KR)(t.getters["theme/isDark"]),p=(0,o.EW)(()=>"mobile"===t.getters["mobile/breakPoint"]),g=e=>{t.dispatch("theme/setTheme",e)};(0,o.wB)(d,e=>{t.dispatch("language/setLanguage",{language:e})});const v=async()=>{await t.dispatch("authFirebase/logout"),await t.dispatch("burgerMenu/setBurger",{isOpen:!1}),await a.push("/login")};return{toggled:g,logout:v,t:e,isDark:u,containerRef:l,isVisible:s,language:d,languages:c,isMobile:p}}});const Wt=(0,h.A)(Pt,[["render",It],["__scopeId","data-v-5af6b5d6"]]);var Kt=Wt;const Dt={class:"color-container"};function Xt(e,t,a,l,s,n){const i=(0,o.g2)("AppLoader"),r=(0,o.g2)("app-color-mask"),c=(0,o.g2)("app-tab"),d=(0,o.g2)("app-collage"),u=(0,o.g2)("app-tabs");return(0,o.uX)(),(0,o.CE)("div",Dt,[e.isLoading?((0,o.uX)(),(0,o.Wv)(i,{key:0})):(0,o.Q3)("",!0),(0,o.bF)(u,null,{default:(0,o.k6)(()=>[(0,o.bF)(c,{title:"mask"},{default:(0,o.k6)(()=>[(0,o.bF)(r,{onIsLoading:t[0]||(t[0]=t=>e.isLoading=t)})]),_:1}),(0,o.bF)(c,{title:"collage"},{default:(0,o.k6)(()=>[(0,o.bF)(d,{onIsLoading:t[1]||(t[1]=t=>e.isLoading=t)})]),_:1})]),_:1})])}const Bt={class:"tabs"},Vt={class:"tab-headers"},Ut=["onClick"],Ot={class:"tab-content"};function Gt(e,t,a,l,s,n){return(0,o.uX)(),(0,o.CE)("div",Bt,[(0,o.Lk)("nav",Vt,[(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.tabs,t=>((0,o.uX)(),(0,o.CE)("li",{key:t.index,class:(0,c.C4)({active:e.activeIndex===t.index,disabled:t.disabled}),onClick:a=>e.setActive(t.index)},[(0,o.Lk)("a",null,(0,c.v_)(e.t(t.title)),1)],10,Ut))),128))])]),(0,o.Lk)("div",Ot,[(0,o.RG)(e.$slots,"default",{},void 0,!0)])])}a(116);var zt=(0,o.pM)({props:{modelValue:{type:Number,default:2}},emits:["update:modelValue","change"],setup(e,{emit:t}){const a=(0,n.KR)(e.modelValue),{t:l}=(0,r.s9)(),s=(0,n.Kh)([]),i=(e,t)=>{const a=s.length;return s.push({title:e,index:a,disabled:t}),a},c=e=>{const l=s[e];l&&!l.disabled&&(a.value=e,t("update:modelValue",e),t("change",e))};return(0,o.Gt)("registerTab",i),(0,o.Gt)("activeIndex",a),(0,o.wB)(()=>e.modelValue,e=>{const l=s[e];if(l&&!l.disabled)a.value=e;else{const e=s.find(e=>!e.disabled);e&&(a.value=e.index,t("update:modelValue",e.index))}}),(0,o.wB)(s,()=>{const e=s[a.value];if(!e||e.disabled){const e=s.find(e=>!e.disabled);e&&(a.value=e.index,t("update:modelValue",e.index))}},{immediate:!0}),{tabs:s,activeIndex:a,setActive:c,t:l}}});const Qt=(0,h.A)(zt,[["render",Gt],["__scopeId","data-v-31b0f54d"]]);var jt=Qt;function Ht(e,t,a,s,n,i){return(0,o.bo)(((0,o.uX)(),(0,o.CE)("div",null,[(0,o.RG)(e.$slots,"default",{},void 0,!0)],512)),[[l.aG,e.isActive]])}var Nt=(0,o.pM)({props:{title:{type:String,required:!0},disabled:{type:Boolean,default:!1}},setup:function(e,{slots:t}){const a=(0,o.WQ)("registerTab"),l=(0,o.WQ)("activeIndex"),s=(0,n.KR)(-1);(0,o.sV)(()=>{a&&(s.value=a(e.title,e.disabled))});const i=(0,o.EW)(()=>l?.value===s.value);return{isActive:i,slots:t}}});const $t=(0,h.A)(Nt,[["render",Ht],["__scopeId","data-v-7d72f4d0"]]);var Yt=$t;const qt={class:"collage-wrapper"},Jt={class:"collage-container"},Zt={ref:"canvas"},ea={key:0,class:"btn"},ta={key:1,class:"btn"},aa={key:5,class:"checkbox"},la={key:6,class:"checkbox"};function oa(e,t,a,s,n,i){const r=(0,o.g2)("app-button"),d=(0,o.g2)("font-awesome-icon"),u=(0,o.g2)("AppCheckbox"),p=(0,o.g2)("app-popover-item"),g=(0,o.g2)("app-popover-wrapper"),v=(0,o.g2)("app-popover");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",qt,[(0,o.Lk)("div",Jt,[(0,o.Lk)("canvas",Zt,null,512)]),(0,o.Lk)("section",{class:(0,c.C4)(["buttons",{isMobile:e.isMobile}])},[e.isMobile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",ea,[(0,o.bF)(r,{raised:"",title:"settings",severity:"secondary",icon:["fas","sliders"],onClick:e.openImageSettingsModal},null,8,["onClick"])])),e.isMobile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",ta,[(0,o.bF)(r,{severity:"success",title:"download",onClick:t[0]||(t[0]=t=>e.saveImage("collage"))})])),e.isMobile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(r,{key:2,severity:"warning",title:"saveToGallery",loading:e.isSaveToGallery,onClick:e.saveToGallery},null,8,["loading","onClick"])),e.isMobile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(r,{key:3,severity:"info",title:"addSign",onClick:e.openImageModal},null,8,["onClick"])),e.isMobile?((0,o.uX)(),(0,o.Wv)(d,{key:4,icon:["fas","ellipsis-h"],size:"lg",onClick:(0,l.D$)(e.openPopover,["stop"])},null,8,["onClick"])):(0,o.Q3)("",!0),e.isMobile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",aa,[(0,o.bF)(u,{modelValue:e.sharedWithMask,"onUpdate:modelValue":t[1]||(t[1]=t=>e.sharedWithMask=t),label:"shareImageWithMask"},null,8,["modelValue"])])),e.isMobile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",la,[(0,o.bF)(u,{modelValue:e.rememberChoose,"onUpdate:modelValue":t[2]||(t[2]=t=>e.rememberChoose=t),label:"rememberChoose"},null,8,["modelValue"])]))],2)]),(0,o.bF)(v,{visible:e.visiblePopover,"onUpdate:visible":t[6]||(t[6]=t=>e.visiblePopover=t)},{default:(0,o.k6)(()=>[(0,o.bF)(g,null,{default:(0,o.k6)(()=>[(0,o.bF)(p,{onClick:e.openImageSettingsModal},{default:(0,o.k6)(()=>[(0,o.bF)(d,{size:"xl",icon:["fas","sliders"]}),(0,o.Lk)("span",null,(0,c.v_)(e.t("settings")),1)]),_:1},8,["onClick"]),(0,o.bF)(p,{onClick:t[3]||(t[3]=t=>e.saveImage("collage"))},{default:(0,o.k6)(()=>[(0,o.bF)(d,{size:"xl",icon:["fas","download"]}),(0,o.Lk)("span",null,(0,c.v_)(e.t("download")),1)]),_:1}),(0,o.bF)(p,{onClick:e.saveToGallery},{default:(0,o.k6)(()=>[(0,o.bF)(d,{size:"xl",icon:["fas","images"]}),(0,o.Lk)("span",null,(0,c.v_)(e.t("saveToGallery")),1)]),_:1},8,["onClick"]),(0,o.bF)(p,{onClick:e.openImageModal},{default:(0,o.k6)(()=>[(0,o.bF)(d,{size:"xl",icon:["fas","fa-pencil-square"]}),(0,o.Lk)("span",null,(0,c.v_)(e.t("addSign")),1)]),_:1},8,["onClick"])]),_:1}),(0,o.bF)(g,null,{default:(0,o.k6)(()=>[(0,o.bF)(p,null,{default:(0,o.k6)(()=>[(0,o.bF)(u,{modelValue:e.sharedWithMask,"onUpdate:modelValue":t[4]||(t[4]=t=>e.sharedWithMask=t)},null,8,["modelValue"]),(0,o.Lk)("span",null,(0,c.v_)(e.t("shareImageWithMask")),1)]),_:1}),(0,o.bF)(p,null,{default:(0,o.k6)(()=>[(0,o.bF)(u,{modelValue:e.rememberChoose,"onUpdate:modelValue":t[5]||(t[5]=t=>e.rememberChoose=t)},null,8,["modelValue"]),(0,o.Lk)("span",null,(0,c.v_)(e.t("rememberChoose")),1)]),_:1})]),_:1})]),_:1},8,["visible"])],64)}const sa=[{id:1,type:"cold",segments:[{color:"#979DAF"},{color:"#C21E56"},{color:"#F3ED7C"},{color:"#155DA4"},{color:"#008684"},{color:"#E5ADD5"},{color:"#D0417E"},{color:"#E7B8D3"},{color:"#FFFFFF"},{color:"#34373B"},{color:"#BA397B"}]},{id:2,type:"warm",segments:[{color:"#E1BD88"},{color:"#DB3844"},{color:"#BC2A3A"},{color:"#E09D66"},{color:"#FAC668"},{color:"#CCD97A"},{color:"#91B54D"},{color:"#D66467"},{color:"#FEA188"},{color:"#CC9C7D"},{color:"#F2EDD8"}]},{id:3,type:"dark",segments:[{color:"#413433"},{color:"#BC243C"},{color:"#373E4B"},{color:"#79857A"},{color:"#987576"},{color:"#483A49"},{color:"#FFFFFF"},{color:"#594440"},{color:"#DEC6AC"},{color:"#707375"},{color:"#777791"}]},{id:4,type:"light",segments:[{color:"#CBB7A2"},{color:"#E63E62"},{color:"#FDE182"},{color:"#657BB8"},{color:"#42BDCB"},{color:"#7DCFB6"},{color:"#E87191"},{color:"#F8CBC7"},{color:"#FABCB1"},{color:"#F4EAE0"},{color:"#F9F9F9"}]},{id:5,type:"soft",segments:[{color:"#53677A"},{color:"#856088"},{color:"#4E9093"},{color:"#814A47"},{color:"#A55972"},{color:"#6B5D74"},{color:"#DCA59E"},{color:"#F4EAE0"},{color:"#F0D3C9"},{color:"#6C5740"},{color:"#6A6855"}]},{id:6,type:"unforgettable",segments:[{color:"#433D42"},{color:"#E5003C"},{color:"#FBE337"},{color:"#4E468B"},{color:"#199D5C"},{color:"#008AC2"},{color:"#43BCD8"},{color:"#DE7AA4"},{color:"#F87B90"},{color:"#F9F9F9"},{color:"#D5DDD5"}]}];var na=a(1924),ia=a(6400),ra=a(4388),ca=a(2832),da=a(1933);const ua={apiKey:"AIzaSyACkcP8ThJg9f_JsBoiy0DErBhC9mg7gtg",authDomain:"rainbow-manager-2c361.firebaseapp.com",projectId:"rainbow-manager-2c361",storageBucket:"rainbow-manager-2c361.firebasestorage.app",messagingSenderId:"561480772779",appId:"1:561480772779:web:3b51c3721116c916811bee"},pa=(0,ia.Wp)(ua),ga=(0,ra.xI)(pa),va=(0,ca.aU)(pa),ma=(0,na.c7)(pa);(0,da.lS)(pa);function ha(e,t,a,l){const o=(0,n.KR)(1),s=()=>e.value?e.value.toDataURL("image/png"):null,i=(t="avatar.png")=>{if(!e.value)return;const a=e.value.toDataURL("image/png"),l=document.createElement("a");l.href=a,l.download=t,l.click()},r=async(t="mask.png")=>{if(e.value)return new Promise((a,l)=>{e.value.toBlob(async e=>{if(!e)return l(new Error("Не удалось получить Blob из canvas"));try{const l=(0,na.KR)(ma,t);await(0,na.D)(l,e);const o=await(0,na.qk)(l);a(o)}catch(o){l(o)}},"image/png")})},c=e=>new Promise((t,a)=>{const l=new Image;l.crossOrigin="anonymous",l.onload=()=>t(l),l.onerror=()=>a(new Error(`Ошибка загрузки: ${e}`)),l.src=e}),d=()=>{l?.value&&a&&a("update:imageUrl",l.value),o.value=1,t()},u=()=>{o.value++,t()},p=()=>{1!==o.value&&(o.value--,t())};return{saveImage:i,loadImage:c,resetImage:d,zoomPlus:u,zoomMinus:p,zoom:o,saveToStorage:r,getCanvasSrc:s}}const fa={class:"popover-item"};function ya(e,t){return(0,o.uX)(),(0,o.CE)("div",fa,[(0,o.RG)(e.$slots,"default",{},void 0,!0)])}const ka={},ba=(0,h.A)(ka,[["render",ya],["__scopeId","data-v-903d1a32"]]);var Ca=ba;const wa={class:"popover-wrapper"};function Ea(e,t){return(0,o.uX)(),(0,o.CE)("section",wa,[(0,o.RG)(e.$slots,"default",{},void 0,!0)])}const Ia={},La=(0,h.A)(Ia,[["render",Ea],["__scopeId","data-v-11bdd0bc"]]);var Ma=La;const Fa={key:0,class:"popover-container"},_a={ref:"popoverContentRef",class:"popover-content"};function Ra(e,t,a,l,s,n){return(0,o.uX)(),(0,o.Wv)(o.Im,{to:"body"},[e.visible?((0,o.uX)(),(0,o.CE)("div",Fa,[(0,o.Lk)("div",_a,[(0,o.Lk)("section",{class:"popover-toggle-container",onClick:t[0]||(t[0]=(...t)=>e.toggle&&e.toggle(...t))},[...t[1]||(t[1]=[(0,o.Lk)("div",{class:"popover-toggle"},null,-1)])]),(0,o.RG)(e.$slots,"default",{},void 0,!0)],512)])):(0,o.Q3)("",!0)])}var Sa=(0,o.pM)({props:{visible:{type:Boolean,default:!1}},emits:["update:visible"],setup(e,{emit:t}){const a=(0,n.KR)(null),l=e=>{const l=a.value,o=e.target;l&&!l.contains(o)&&t("update:visible",!1)},s=()=>{t("update:visible",!1)};return(0,o.sV)(()=>{document.addEventListener("click",l)}),(0,o.xo)(()=>{document.removeEventListener("click",l)}),{popoverContentRef:a,toggle:s}}});const Ta=(0,h.A)(Sa,[["render",Ra],["__scopeId","data-v-0258f386"]]);var Aa=Ta;const xa=["for"],Pa=["aria-checked","aria-disabled","aria-readonly"],Wa={key:0,class:"rc__label"},Ka=["id","checked","disabled","readonly"];function Da(e,t,a,l,s,n){return(0,o.uX)(),(0,o.CE)("label",{class:(0,c.C4)(["rc",{"rc--checked":e.modelValue,"rc--indeterminate":e.indeterminate,"rc--disabled":e.disabled,"rc--error":e.error}]),style:(0,c.Tr)(e.styles),for:e.id||void 0},[(0,o.Lk)("span",{class:"rc__control",role:"checkbox","aria-checked":e.ariaChecked,"aria-disabled":e.disabled?"true":"false","aria-readonly":e.readonly?"true":"false",tabindex:"0",onKeydown:t[0]||(t[0]=(...t)=>e.onKeydown&&e.onKeydown(...t)),onFocus:t[1]||(t[1]=t=>e.$emit("focus")),onBlur:t[2]||(t[2]=t=>e.$emit("blur")),onClick:t[3]||(t[3]=(...t)=>e.toggle&&e.toggle(...t))},[...t[5]||(t[5]=[(0,o.Lk)("span",{class:"rc__ring"},null,-1),(0,o.Lk)("span",{class:"rc__fill"},null,-1),(0,o.Lk)("span",{class:"rc__mark"},null,-1)])],40,Pa),e.label?((0,o.uX)(),(0,o.CE)("span",Wa,(0,c.v_)(e.t(e.label)),1)):(0,o.Q3)("",!0),e.id?((0,o.uX)(),(0,o.CE)("input",{key:1,id:e.id,type:"checkbox",class:"rc__native",checked:e.modelValue,disabled:e.disabled,readonly:e.readonly,onChange:t[4]||(t[4]=(...t)=>e.toggle&&e.toggle(...t))},null,40,Ka)):(0,o.Q3)("",!0)],14,xa)}var Xa=(0,o.pM)({props:{modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},label:{type:String,default:""},size:{type:Number,default:24},error:{type:Boolean,default:!1},id:{type:String,default:""}},emits:["update:modelValue","change","focus","blur"],setup(e,{emit:t}){const{t:a}=(0,r.s9)(),{modelValue:l,disabled:s,readonly:i,indeterminate:c,size:d}=(0,n.QW)(e),u=(0,o.EW)(()=>c.value?"mixed":l.value?"true":"false"),p=()=>{if(s.value||i.value)return;const e=!l.value;t("update:modelValue",e),t("change",e)},g=e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),p())},v=(0,o.EW)(()=>({"--rc-size":`${d.value}px`}));return{toggle:p,onKeydown:g,ariaChecked:u,styles:v,t:a}}});const Ba=(0,h.A)(Xa,[["render",Da],["__scopeId","data-v-49453e15"]]);var Va=Ba;const Ua=e=>new Promise((t,a)=>{const l=new FileReader;l.onload=e=>t(e.target?.result),l.onerror=a,l.readAsDataURL(e)}),Oa={ref:"modalRef",class:"modal-content neon"},Ga=["src"],za={class:"info-section"},Qa={class:"info-section-wrapper"},ja={class:"badge-wrapper"},Ha={key:0,class:"badge darkBadge"},Na={key:1,class:"badge darkBadge"},$a={key:2,class:"badge darkBadge"},Ya={class:"actions"},qa={class:"btn"},Ja={class:"btn"};function Za(e,t,a,l,s,n){const i=(0,o.g2)("app-modal-header"),r=(0,o.g2)("app-input"),d=(0,o.g2)("app-button");return(0,o.uX)(),(0,o.CE)("div",Oa,[(0,o.bF)(i,{onClose:e.close},null,8,["onClose"]),(0,o.Lk)("img",{src:e.url,alt:""},null,8,Ga),(0,o.Lk)("section",za,[(0,o.Lk)("div",Qa,[(0,o.Lk)("div",ja,[e.folder?((0,o.uX)(),(0,o.CE)("span",Ha,(0,c.v_)(e.folder?.name),1)):(0,o.Q3)("",!0),e.coloristicType?((0,o.uX)(),(0,o.CE)("span",Na,(0,c.v_)(e.coloristicType),1)):(0,o.Q3)("",!0),e.maskType?((0,o.uX)(),(0,o.CE)("span",$a,(0,c.v_)(e.maskType),1)):(0,o.Q3)("",!0)]),(0,o.bF)(r,{modelValue:e.signIn,"onUpdate:modelValue":t[0]||(t[0]=t=>e.signIn=t),icon:["fas","fa-pencil"],"is-label":!1},null,8,["modelValue"]),(0,o.Lk)("div",Ya,[(0,o.Lk)("div",qa,[(0,o.bF)(d,{severity:"info",title:"addFolder",onClick:e.openFolderModal},null,8,["onClick"])]),(0,o.Lk)("div",Ja,[(0,o.bF)(d,{loading:e.isSaveToGallery,severity:"warning",title:"saveToGallery",onClick:e.saveToGallery},null,8,["loading","onClick"])])])])])],512)}const el={class:"modal-header-section"};function tl(e,t,a,l,s,n){const i=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)("section",el,[e.isMobile?((0,o.uX)(),(0,o.Wv)(i,{key:0,size:"lg",icon:["fas","arrow-left"],onClick:e.close},null,8,["onClick"])):(0,o.Q3)("",!0),e.isMobile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",{key:1,class:"close",onClick:t[0]||(t[0]=(...t)=>e.close&&e.close(...t))},[(0,o.bF)(i,{size:"lg",icon:["fas","fa-times"]})]))])}var al=(0,o.pM)({emits:["close"],setup(e,{emit:t}){const a=(0,i.Pj)(),l=(0,o.EW)(()=>"mobile"===a.getters["mobile/breakPoint"]),s=()=>{t("close")};return{isMobile:l,close:s}}});const ll=(0,h.A)(al,[["render",tl],["__scopeId","data-v-4e2994b3"]]);var ol=ll;const sl={ref:"modalRef",class:"modal-content"},nl={class:"folder-section"},il={class:"folder-section-create"},rl={class:"search"},cl={class:"folder-section-folders"},dl={class:"folder-section-actions"};function ul(e,t,a,l,s,n){const i=(0,o.g2)("app-modal-header"),r=(0,o.g2)("app-loader"),c=(0,o.g2)("app-input"),d=(0,o.g2)("app-button"),u=(0,o.g2)("app-folder-card");return(0,o.uX)(),(0,o.CE)("div",sl,[(0,o.bF)(i,{onClose:e.close},null,8,["onClose"]),(0,o.Lk)("section",nl,[e.isLoading?((0,o.uX)(),(0,o.Wv)(r,{key:0})):(0,o.Q3)("",!0),(0,o.Lk)("div",il,[(0,o.Lk)("div",rl,[(0,o.bF)(c,{modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=t=>e.search=t),placeholder:"search",icon:["fas","search"],"is-label":!1},null,8,["modelValue"])]),(0,o.bF)(d,{icon:["fas","plus"],severity:"info",onClick:e.openCreateFolderModal},null,8,["onClick"])]),(0,o.Lk)("div",cl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.folders,t=>((0,o.uX)(),(0,o.Wv)(u,{key:t.id,folder:t,"is-selected":e.selectedFolder?.id===t?.id,onSelected:e.selected},null,8,["folder","is-selected","onSelected"]))),128))]),(0,o.Lk)("div",dl,[(0,o.Lk)("div",{class:"btn",onClick:t[1]||(t[1]=(...t)=>e.choose&&e.choose(...t))},[(0,o.bF)(d,{disabled:!e.selectedFolder,title:"choose",severity:"warning"},null,8,["disabled"])])])])],512)}const pl={class:"folder-wrapper"},gl=["src"],vl={class:"title"},ml={class:"overlay-folder"};function hl(e,t,l,s,n,i){const r=(0,o.g2)("font-awesome-icon"),d=(0,o.g2)("app-overlay-panel");return(0,o.uX)(),(0,o.CE)("section",pl,[(0,o.Lk)("div",{ref:"targetRef",class:"icon",onClick:t[0]||(t[0]=(...t)=>e.toggleCardOverlayPanel&&e.toggleCardOverlayPanel(...t))},[(0,o.bF)(r,{size:"sm",icon:["fas","ellipsis-v"]})],512),(0,o.Lk)("div",{class:(0,c.C4)(["folder-card",{cardSelected:e.isSelected}]),onClick:t[5]||(t[5]=(...t)=>e.selected&&e.selected(...t))},[(0,o.Lk)("img",{loading:"lazy",class:(0,c.C4)({"fade-in":e.onLoad}),src:a(2823),alt:"Rainbow Folder",onLoad:t[1]||(t[1]=(...t)=>e.onLoad&&e.onLoad(...t))},null,42,gl),(0,o.Lk)("div",vl,[(0,o.Lk)("span",null,(0,c.v_)(e.folder.name),1)]),e.targetRef?((0,o.uX)(),(0,o.Wv)(d,{key:0,visible:e.visible,"onUpdate:visible":t[4]||(t[4]=t=>e.visible=t),width:150,target:e.targetRef,position:{x:"right",y:"center"}},{default:(0,o.k6)(()=>[(0,o.Lk)("div",ml,[(0,o.Lk)("div",{class:"overlay-folder-item",onClick:t[2]||(t[2]=(...t)=>e.openCreateFolderModal&&e.openCreateFolderModal(...t))},[(0,o.bF)(r,{size:"sm",icon:["fas","fa-pencil"]}),(0,o.Lk)("span",null,(0,c.v_)(e.t("edit")),1)]),(0,o.Lk)("div",{class:"overlay-folder-item",onClick:t[3]||(t[3]=(...t)=>e.deleteFolder&&e.deleteFolder(...t))},[(0,o.bF)(r,{size:"sm",icon:["fas","fa-trash"]}),(0,o.Lk)("span",null,(0,c.v_)(e.t("delete")),1)])])]),_:1},8,["visible","target"])):(0,o.Q3)("",!0)],2)])}const fl={ref:"modalRef",class:"modal-content neon"},yl={class:"header"},kl={class:"input"},bl={class:"actions"},Cl={class:"btn"};function wl(e,t,a,l,s,n){const i=(0,o.g2)("app-input"),r=(0,o.g2)("app-button");return(0,o.uX)(),(0,o.CE)("div",fl,[(0,o.Lk)("header",yl,[(0,o.Lk)("span",null,(0,c.v_)(e.t("newFolder")),1)]),(0,o.Lk)("div",kl,[(0,o.bF)(i,{modelValue:e.folderName,"onUpdate:modelValue":t[0]||(t[0]=t=>e.folderName=t),"is-focused":!0,"is-label":!1,placeholder:"nameFolder"},null,8,["modelValue"])]),(0,o.Lk)("div",bl,[(0,o.Lk)("div",{class:"btn",onClick:t[1]||(t[1]=(...t)=>e.close&&e.close(...t))},[(0,o.bF)(r,{title:"cancel",severity:"error",onClick:e.close},null,8,["onClick"])]),(0,o.Lk)("div",Cl,[(0,o.bF)(r,{disabled:!e.folderName,title:"ok",severity:"info",onClick:e.setName},null,8,["disabled","onClick"])])])],512)}var El=(0,o.pM)({components:{AppButton:Je,AppInput:pe},props:{name:{type:String,default:""}},emits:["resolve","reject","close"],setup(e,{emit:t}){const{t:a}=(0,r.s9)(),l=(0,n.KR)(e.name),o=()=>{t("close")},s=()=>{t("resolve",l.value)};return{folderName:l,close:o,setName:s,t:a}}});const Il=(0,h.A)(El,[["render",wl],["__scopeId","data-v-0355e2f2"]]);var Ll=Il;const Ml={ref:"modalRef",class:"modal-content neon"},Fl={class:"header"},_l={class:"text"},Rl={class:"actions"};function Sl(e,t,a,l,s,n){const i=(0,o.g2)("app-button");return(0,o.uX)(),(0,o.CE)("div",Ml,[(0,o.Lk)("header",Fl,[(0,o.Lk)("span",null,(0,c.v_)(e.title),1)]),(0,o.Lk)("div",_l,[(0,o.Lk)("span",null,(0,c.v_)(e.text),1)]),(0,o.Lk)("div",Rl,[(0,o.Lk)("div",{class:"btn",onClick:t[0]||(t[0]=(...t)=>e.close&&e.close(...t))},[(0,o.bF)(i,{title:"cancel",severity:"error"})]),(0,o.Lk)("div",{class:"btn",onClick:t[1]||(t[1]=(...t)=>e.ok&&e.ok(...t))},[(0,o.bF)(i,{title:"ok",severity:"info"})])])],512)}var Tl=(0,o.pM)({components:{AppButton:Je},props:{text:{type:String,default:""},title:{type:String,default:""}},emits:["resolve","reject","close"],setup(e,{emit:t}){const a=()=>{t("close")},l=()=>{t("resolve",!0)};return{close:a,ok:l}}});const Al=(0,h.A)(Tl,[["render",Sl],["__scopeId","data-v-e1dd9a42"]]);var xl=Al,Pl=(0,o.pM)({components:{AppOverlayPanel:Ee},props:{isSelected:{type:Boolean,default:!1},folder:{type:Object,required:!0}},emits:["selected"],setup(e,{emit:t}){const{t:a}=(0,r.s9)(),l=(0,i.Pj)(),o=(0,n.KR)(null),s=(0,n.KR)(!1),c=(0,n.KR)(!1),d=()=>{c.value=!0},u=()=>{t("selected",e.folder)},p=()=>{s.value=!s.value},g=async()=>{p(),await E(xl,{text:a("dywDelete"),title:a("delete")}).then(t=>{t&&l.dispatch("folder/deleteFolder",e.folder.id)})},v=async()=>{p(),await E(Ll,{name:e.folder.name}).then(t=>{l.dispatch("folder/updateFolder",{id:e.folder.id,name:t})})};return{targetRef:o,toggleCardOverlayPanel:p,visible:s,selected:u,deleteFolder:g,openCreateFolderModal:v,onLoad:d,t:a}}});const Wl=(0,h.A)(Pl,[["render",hl],["__scopeId","data-v-fe7e2e90"]]);var Kl=Wl;function Dl(e,t,a,l,s,n){return(0,o.uX)(),(0,o.CE)("div",{class:(0,c.C4)(["loader-container",{transparent:e.transparent}])},[...t[0]||(t[0]=[(0,o.Lk)("div",{class:"loader"},null,-1)])],2)}var Xl=(0,o.pM)({props:{transparent:{type:Boolean,default:!1}}});const Bl=(0,h.A)(Xl,[["render",Dl],["__scopeId","data-v-485c514e"]]);var Vl=Bl,Ul=(0,o.pM)({components:{AppLoader:Vl,AppFolderCard:Kl,AppInput:pe,AppButton:Je,AppModalHeader:ol},props:{folder:{type:Object,default:null}},emits:["resolve","reject","close"],setup(e,{emit:t}){const a=(0,i.Pj)(),l=(0,o.EW)(()=>a.getters["folder/getFilterFolders"]),s=(0,n.KR)(e.folder),r=(0,o.EW)(()=>a.getters["authFirebase/getUserId"]),c=(0,o.EW)(()=>a.getters["folder/isLoading"]),d=(0,n.KR)(""),u=e=>{s.value=e},p=()=>{t("close")};(0,o.sV)(()=>{a.dispatch("folder/getFolders",r.value)});const g=async()=>{await E(Ll,{}).then(e=>{a.dispatch("folder/saveFolder",{userId:r.value,name:e})})},v=()=>{t("resolve",s.value)};return(0,o.wB)(d,e=>{a.dispatch("folder/filterFolder",e)}),{close:p,folders:l,selected:u,selectedFolder:s,openCreateFolderModal:g,isLoading:c,choose:v,search:d}}});const Ol=(0,h.A)(Ul,[["render",ul],["__scopeId","data-v-73ffbe56"]]);var Gl=Ol,zl=(0,o.pM)({components:{AppModalHeader:ol,AppInput:pe,AppButton:Je},props:{url:Ze.Yj,coloristicType:{type:String,default:""},maskType:{type:String,default:""},canvas:HTMLCanvasElement,currentUserId:Ze.Yj,imageUrl:Ze.Yj},emits:["resolve","reject","close"],setup(e,{emit:t}){const a=(0,i.Pj)(),l=(0,n.KR)(""),o=(0,n.KR)(!1),s=(0,n.KR)(null),r=()=>{t("close")},c=async()=>{if(e.imageUrl){o.value=!0;try{await a.dispatch("gallery/saveImageToGallery",{canvas:e.canvas,title:l.value,coloristicType:e.coloristicType,maskType:e.maskType,userId:e.currentUserId,folderId:s.value?.id?s.value?.id:""}),t("close")}finally{o.value=!1}}else await a.dispatch("toast/addToast",{message:"Upload image",severity:"warning"})},d=async()=>{await E(Gl,{},{transparent:!0}).then(e=>{s.value=e})};return{close:r,signIn:l,saveToGallery:c,isSaveToGallery:o,openFolderModal:d,folder:s}}});const Ql=(0,h.A)(zl,[["render",Za],["__scopeId","data-v-1d6815c8"]]);var jl=Ql;const Hl={ref:"modalRef",class:"modal-content neon"},Nl={ref:"canvas"},$l={class:"actions"};function Yl(e,t,a,s,n,i){const r=(0,o.g2)("app-modal-header"),c=(0,o.g2)("app-button"),d=(0,o.g2)("app-file-uploader");return(0,o.uX)(),(0,o.CE)("div",Hl,[(0,o.bF)(r,{onClose:e.close},null,8,["onClose"]),(0,o.Lk)("div",{ref:"wrap",class:"canvas-wrap",onPointerdown:t[0]||(t[0]=(...t)=>e.startPan&&e.startPan(...t)),onWheel:t[1]||(t[1]=(0,l.D$)((...t)=>e.onWheel&&e.onWheel(...t),["prevent"])),onPointermove:t[2]||(t[2]=(...t)=>e.onPointerMove&&e.onPointerMove(...t)),onPointerup:t[3]||(t[3]=(...t)=>e.endPan&&e.endPan(...t)),onPointercancel:t[4]||(t[4]=(...t)=>e.endPan&&e.endPan(...t)),onPointerleave:t[5]||(t[5]=(...t)=>e.endPan&&e.endPan(...t))},[(0,o.Lk)("canvas",Nl,null,512)],544),(0,o.Lk)("div",$l,[(0,o.bF)(c,{severity:"secondary",raised:"",icon:["fas","undo"],onClick:e.reset},null,8,["onClick"]),(0,o.bF)(c,{severity:"secondary",raised:"",icon:["fas","plus"],onClick:e.zoomIn},null,8,["onClick"]),(0,o.bF)(c,{severity:"secondary",raised:"",icon:["fas","minus"],onClick:e.zoomOut},null,8,["onClick"]),(0,o.bF)(c,{severity:"secondary",raised:"",icon:["fas","share"],onClick:e.exportImage},null,8,["onClick"]),(0,o.bF)(d,{"is-show-sign":!1,"is-title":!1,onSelect:e.onFileSelected},null,8,["onSelect"])])],512)}a(4603),a(7566),a(8721);const ql={class:"file-uploader"},Jl={key:0,class:"upload-btn-title"},Zl={key:0,class:"file-name"};function eo(e,t,a,l,s,n){const i=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)("div",ql,[(0,o.Lk)("input",{ref:"fileInput",type:"file",accept:"image/*",class:"file-input",onChange:t[0]||(t[0]=(...t)=>e.onFileChange&&e.onFileChange(...t))},null,544),(0,o.Lk)("button",{type:"button",class:"upload-btn",onClick:t[1]||(t[1]=(...t)=>e.triggerInput&&e.triggerInput(...t))},[(0,o.bF)(i,{size:"lg",icon:["fas","file-upload"]}),e.isTitle?((0,o.uX)(),(0,o.CE)("span",Jl,(0,c.v_)(e.t("upload")),1)):(0,o.Q3)("",!0)]),e.fileName&&e.isShowSign?((0,o.uX)(),(0,o.CE)("div",Zl,(0,c.v_)(e.fileName),1)):(0,o.Q3)("",!0)])}var to=(0,o.pM)({name:"FileUploader",props:{isTitle:{type:Boolean,default:!0},isShowSign:{type:Boolean,default:!0}},emits:["select"],setup(e,{emit:t}){const{t:a}=(0,r.s9)(),l=(0,n.KR)(null),o=(0,n.KR)("");function s(){l.value?.click()}function i(e){const a=e.target,l=a.files?.[0];l&&(o.value=l.name,t("select",l))}return{fileInput:l,fileName:o,triggerInput:s,onFileChange:i,t:a}}});const ao=(0,h.A)(to,[["render",eo],["__scopeId","data-v-50053411"]]);var lo=ao,oo=(0,o.pM)({components:{AppButton:Je,AppModalHeader:ol,AppFileUploader:lo},props:{imageUrl:{type:String,required:!1,default:""}},emits:["resolve","reject","close"],setup(e,{emit:t}){const a=12;let l=360;const s=(0,n.KR)(e.imageUrl),i=(0,n.KR)(null),r=(0,n.KR)(null),c=(0,n.KR)(null),d=(0,n.KR)(null),u=(0,n.KR)(null);let p=0,g=0;const v=2,m=1.15;let h={x:0,y:0};const f=(0,n.KR)(e.imageUrl),y=(0,n.KR)(null),k=(0,n.KR)(null),b=(0,n.Kh)({scale:1,minScale:.5,maxScale:4,x:0,y:0,dragging:!1,lastPointer:null,pointers:new Map,naturalW:0,naturalH:0,_pinchStartDist:null,_pinchStartScale:null}),C=()=>{if(!c.value)return;const e=c.value.getBoundingClientRect();p=e.width,g=e.height;const t=Math.min(window.devicePixelRatio||1,v);c.value.width=Math.round(p*t),c.value.height=Math.round(g*t),c.value.style.width=`${p}px`,c.value.style.height=`${g}px`;const a=c.value.getContext("2d");a.setTransform(t,0,0,t,0,0),u.value=a},w=async e=>{const t=new Image;await new Promise((a,l)=>{t.onload=()=>a(),t.onerror=()=>l(new Error("Image load error")),t.src=e}),y.value=t,b.naturalW=t.naturalWidth,b.naturalH=t.naturalHeight,I(),L()},E=async e=>{if(!e)return;i.value=e;const t=URL.createObjectURL(e);s.value=t,await w(t),URL.revokeObjectURL(t)},I=()=>{if(!y.value)return;const e=y.value,t=l,a=t/e.naturalWidth,o=t/e.naturalHeight;b.scale=Math.max(a,o),b.minScale=b.scale,b.maxScale=4*b.scale,b.x=0,b.y=0,W()},L=()=>{const e=u.value;if(!e||!c.value)return;e.clearRect(0,0,p,g);const t=p/2,l=g/2,o=Math.min(p,g)/2-a;if(!y.value)return e.fillStyle="#efefef",e.fillRect(0,0,p,g),void M(e,o,t,l);const s=y.value,n=s.naturalWidth*b.scale,i=s.naturalHeight*b.scale,r=t-n/2+b.x,d=l-i/2+b.y;e.drawImage(s,r,d,n,i),e.save(),e.fillStyle="rgba(0,0,0,0.45)",e.beginPath(),e.rect(0,0,p,g),e.arc(t,l,o,0,2*Math.PI,!0),e.closePath();try{e.fill("evenodd")}catch{e.globalCompositeOperation="destination-out",e.beginPath(),e.arc(t,l,o,0,2*Math.PI),e.fill(),e.globalCompositeOperation="source-over"}e.restore(),M(e,o,t,l)},M=(e,t,a,l)=>{e.save(),e.strokeStyle="rgba(255,215,0,1)",e.lineWidth=2,e.beginPath(),e.arc(a,l,t,0,2*Math.PI),e.stroke(),e.restore()},F=e=>{d.value?.setPointerCapture(e.pointerId),b.pointers.set(e.pointerId,S(e)),1===b.pointers.size&&(b.dragging=!0,b.lastPointer=S(e))},_=e=>{if(y.value){if(b.pointers.has(e.pointerId)&&b.pointers.set(e.pointerId,S(e)),2===b.pointers.size){const e=Array.from(b.pointers.values()),t=T(e[0],e[1]);if(null==b._pinchStartDist)b._pinchStartDist=t,b._pinchStartScale=b.scale;else{const a=t/b._pinchStartDist;x(b._pinchStartScale*a,{x:(e[0].clientX+e[1].clientX)/2,y:(e[0].clientY+e[1].clientY)/2})}}else if(1===b.pointers.size&&b.dragging&&b.lastPointer){const e=b.pointers.values().next().value,t=e.clientX-b.lastPointer.clientX,a=e.clientY-b.lastPointer.clientY;A(t,a),b.lastPointer=S(e)}else if(b.dragging&&b.lastPointer){const t=e.clientX-b.lastPointer.clientX,a=e.clientY-b.lastPointer.clientY;A(t,a),b.lastPointer=S(e)}L()}},R=e=>{d.value?.releasePointerCapture?.(e.pointerId),b.pointers.delete(e.pointerId),b.pointers.size<2&&(b._pinchStartDist=null,b._pinchStartScale=null),0===b.pointers.size&&(b.dragging=!1,b.lastPointer=null),W(),L()},S=e=>({clientX:e.clientX,clientY:e.clientY,pointerId:e.pointerId}),T=(e,t)=>{const a=e.clientX-t.clientX,l=e.clientY-t.clientY;return Math.sqrt(a*a+l*l)},A=(e,t)=>{if(!c.value)return;const a=c.value.getBoundingClientRect(),o=l/a.width,s=l/a.height;b.x+=e*o,b.y+=t*s,W()},x=(e,t=null)=>{const a=b.scale;if(e=Math.max(b.minScale,Math.min(b.maxScale,e)),!t)return b.scale=e,void W();const o=c.value.getBoundingClientRect(),s=o.left+o.width/2,n=o.top+o.height/2,i=(t.x-s)*(l/o.width),r=(t.y-n)*(l/o.height);b.x=i+(b.x-i)*(e/a),b.y=r+(b.y-r)*(e/a),b.scale=e,W()},P=e=>{if(!y.value)return;const t=-e.deltaY,a=Math.exp(.0012*t);x(b.scale*a,{x:e.clientX,y:e.clientY}),L()},W=()=>{if(!y.value)return;const e=y.value,t=e.naturalWidth*b.scale,a=e.naturalHeight*b.scale,o=l/2,s=o*Math.SQRT2,n=s/2,i=-(t/2-n),r=t/2-n,c=-(a/2-n),d=a/2-n;b.x=i>r?0:Math.max(i,Math.min(r,b.x)),b.y=c>d?0:Math.max(c,Math.min(d,b.y))},K=async()=>{if(!y.value||!c.value)return Promise.resolve(null);const e=document.createElement("canvas");e.width=l,e.height=l;const a=e.getContext("2d"),o=l/2,s=l/2,n=y.value,r=n.naturalWidth*b.scale,d=n.naturalHeight*b.scale,u=o-r/2+b.x,p=s-d/2+b.y;a.clearRect(0,0,l,l),a.drawImage(n,u,p,r,d),a.globalCompositeOperation="destination-in",a.beginPath(),a.arc(o,s,l/2,0,2*Math.PI),a.closePath(),a.fill(),k.value=e.toDataURL("image/png");const g=await new Promise(t=>{e.toBlob(e=>t(e),"image/png")});if(!g)return null;const v=new File([g],"avatar.png",{type:"image/png",lastModified:Date.now()});t("resolve",{file:v,originalFile:i.value})},D=async()=>{if(i.value){const e=URL.createObjectURL(i.value);return await w(e),void URL.revokeObjectURL(e)}e.imageUrl&&await w(e.imageUrl)};let X=null,B=0,V=!1;const U=()=>{V||(V=!0,B=requestAnimationFrame(()=>{V=!1,L()}))};(0,o.sV)(()=>{C(),U(),X=new ResizeObserver(()=>{C(),U()}),c.value?.parentElement&&X.observe(c.value.parentElement),f.value&&w(f.value),window.addEventListener("orientationchange",()=>{C(),U()}),d.value?.addEventListener("pointerdown",e=>{d.value?.setPointerCapture?.(e.pointerId)})}),(0,o.xo)(()=>{X&&c.value?.parentElement&&X.unobserve(c.value.parentElement),X=null,cancelAnimationFrame(B),b.pointers.clear()});const O=()=>{z(),x(b.scale*m,{x:h.x,y:h.y}),L()},G=()=>{z(),x(b.scale/m,{x:h.x,y:h.y}),L()},z=()=>{if(!c.value)return;const e=c.value.getBoundingClientRect();h={x:e.left+e.width/2,y:e.top+e.height/2}},Q=()=>{t("close")};return{fileInput:r,canvas:c,wrap:d,image:f,imgObj:y,onFileSelected:E,reset:D,exportImage:K,startPan:F,onPointerMove:_,endPan:R,onWheel:P,zoomIn:O,zoomOut:G,close:Q}}});const so=(0,h.A)(oo,[["render",Yl],["__scopeId","data-v-06683736"]]);var no=so;const io=410,ro=320,co=550,uo=960,po=30,go=20;var vo=(0,o.pM)({components:{AppCheckbox:Va,AppPopover:Aa,AppPopoverWrapper:Ma,AppPopoverItem:Ca,AppButton:Je},emits:["update:imageUrl","isLoading"],setup(e,{emit:t}){const{t:a}=(0,r.s9)(),l=(0,n.KR)(!1),s=(0,i.Pj)(),c=(0,n.KR)(null),d=(0,n.KR)(null),u=(0,n.KR)(uo),p=(0,n.KR)(co),g=(0,n.KR)(1),v=(0,n.KR)(null),m=(0,o.EW)(()=>"mobile"===s.getters["mobile/breakPoint"]),h=(0,o.EW)(()=>s.getters["authFirebase/currentUser"]),f=(0,n.KR)(null),y=(0,n.KR)(),k=(0,n.KR)(!1),b=(0,n.KR)(s.getters["imageColor/shareImgMask"]),C=(0,n.KR)(s.getters["imageColor/rememberImgCollage"]);let w=!1;const I=async e=>{w=!1,f.value=await Ua(e),await s.dispatch("imageColor/uploadImgCollage",{file:e}),await L()},L=async()=>{if(!c.value)return;const e=c.value.getContext("2d"),t=window.devicePixelRatio||1;c.value.width=u.value*t,c.value.height=p.value*t,c.value.style.width=u.value+"px",c.value.style.height=p.value+"px",e.setTransform(1,0,0,1,0,0),e.scale(t,t),e.clearRect(0,0,u.value,p.value),f.value&&!w&&(d.value=await _(f.value),w=!0);const a=u.value===ro,l=a?2:3,o=a?3:2,s=10,n=8,i=a?1.2*g.value:g.value,r=s*(l-1),v=(u.value-r)/l;let m=v/2*i-po;m<1&&(m=1);const h=n*(o-1),y=(p.value-h)/o;let k=0;for(let c=0;c<o;c++)for(let t=0;t<l;t++){const a=t*(v+s)+v/2,l=c*(y+n)+y/2,o=sa[k%sa.length];x(e,d.value,a,l,m,o.segments),k++}},{getCanvasSrc:M,saveImage:F,loadImage:_,resetImage:R,zoomPlus:S,zoomMinus:T,zoom:A}=ha(c,L,t,v),x=(e,t,a,l,o,s)=>{const n=u.value===ro?go:po;if(t){e.save(),e.beginPath(),e.arc(a,l,o,0,2*Math.PI),e.closePath(),e.clip();const s=Math.min(t.width,t.height),i=(t.width-s)/2,r=(t.height-s)/2,c=(2*o-2*n)*A.value;e.drawImage(t,i,r,s,s,a-c/2,l-c/2,c,c),e.restore()}const i=s.length,r=2*Math.PI/i;e.lineWidth=n;for(let c=0;c<i;c++){const t=c*r-Math.PI/2,i=(c+1)*r-Math.PI/2;e.beginPath(),e.strokeStyle=s[c].color,e.arc(a,l,o-n/2,t,i),e.stroke()}};(0,o.wB)(()=>s.getters["mobile/clientWidth"],e=>{e<600&&(u.value=ro,p.value=io),e>1024&&(u.value=uo,p.value=co),L()},{immediate:!0});const P=()=>{l.value=!0},W=async()=>{if(w){k.value=!0,l.value=!1,m.value&&t("isLoading",!0);try{await s.dispatch("gallery/saveImageToGallery",{canvas:c.value,title:"",coloristicType:"collage",maskType:"",userId:h.value?.uid})}finally{k.value=!1,m.value&&t("isLoading",!1)}}else await s.dispatch("toast/addToast",{message:"Upload image",severity:"warning"})};(0,o.wB)(()=>b.value,e=>{s.dispatch("imageColor/setShareImgMask",{share:e})}),(0,o.wB)(()=>C.value,e=>{s.dispatch("imageColor/setRememberImgCollage",{remember:e})}),(0,o.wB)(()=>s.getters["imageColor/imgMask"],e=>{s.getters["imageColor/shareImgCollage"]&&I(e)}),(0,o.sV)(()=>{if(L(),s.getters["imageColor/rememberImgCollage"]){const e=s.getters["imageColor/imgCollage"];e&&I(e)}});const K=async()=>{const e=M();await E(jl,{url:e,coloristicType:"collage",currentUserId:h.value?.uid,canvas:c.value,imageUrl:f.value})},D=async()=>{l.value=!1;const e=s.getters["imageColor/getOriginalImgCollage"];let t=null;e&&(t=await Ua(e)),await E(no,{imageUrl:t}).then(e=>{e.originalFile&&s.dispatch("imageColor/setOriginalImgCollage",{file:e.originalFile}),s.dispatch("imageColor/uploadImgCollage",{file:e.file}),I(e.file)})};return{canvas:c,saveImage:F,resetImage:R,zoomPlus:S,zoomMinus:T,isMobile:m,openPopover:P,visiblePopover:l,t:a,isSaveToGallery:k,saveToGallery:W,sharedWithMask:b,rememberChoose:C,onFileSelected:I,uploader:y,openImageModal:K,openImageSettingsModal:D}}});const mo=(0,h.A)(vo,[["render",oa],["__scopeId","data-v-309bd890"]]);var ho=mo;const fo={class:"color-wrapper"},yo={class:"selected"},ko={class:"editor"},bo={key:0,class:"btn"},Co={key:1,class:"btn"},wo={key:2,class:"btn"},Eo={key:3,class:"btn"},Io={key:4,class:"btn"},Lo={key:5,class:"checkbox"},Mo={key:6,class:"checkbox"};function Fo(e,t,a,s,n,i){const r=(0,o.g2)("app-color-card"),d=(0,o.g2)("app-editor-canvas"),u=(0,o.g2)("app-button"),p=(0,o.g2)("AppCheckbox"),g=(0,o.g2)("font-awesome-icon"),v=(0,o.g2)("app-popover-item"),m=(0,o.g2)("app-popover-wrapper"),h=(0,o.g2)("app-popover");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",fo,[(0,o.Lk)("section",yo,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.cards,t=>((0,o.uX)(),(0,o.Wv)(r,{key:t.id,card:t,"is-selected":e.selectedCard?.id===t?.id,onSelected:e.selected},null,8,["card","is-selected","onSelected"]))),128))]),(0,o.Lk)("section",ko,[(0,o.bF)(d,{ref:"editorCanvasRef","image-url":e.imageUrl,"onUpdate:imageUrl":t[0]||(t[0]=t=>e.imageUrl=t),segments:e.frameColors},null,8,["image-url","segments"])]),(0,o.Lk)("section",{class:(0,c.C4)(["buttons",{isMobile:e.isMobile}])},[e.isMobile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",bo,[(0,o.bF)(u,{raised:"",title:"settings",severity:"secondary",icon:["fas","sliders"],onClick:e.openImageSettingsModal},null,8,["onClick"])])),e.isMobile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Co,[(0,o.bF)(u,{raised:"",icon:["fas","camera"],severity:"secondary",title:"takePhoto",onClick:e.openCameraModal},null,8,["onClick"])])),e.isMobile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",wo,[(0,o.bF)(u,{severity:"success",title:"download",onClick:e.saveToDevice},null,8,["onClick"])])),e.isMobile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Eo,[(0,o.bF)(u,{severity:"warning",title:"saveToGallery",loading:e.isSaveToGallery,onClick:e.saveToGallery},null,8,["loading","onClick"])])),e.isMobile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Io,[(0,o.bF)(u,{severity:"info",title:"addSign",onClick:e.openImageModal},null,8,["onClick"])])),e.isMobile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Lo,[(0,o.bF)(p,{modelValue:e.sharedWithCollage,"onUpdate:modelValue":t[1]||(t[1]=t=>e.sharedWithCollage=t),label:"shareImageWithCollage"},null,8,["modelValue"])])),e.isMobile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Mo,[(0,o.bF)(p,{modelValue:e.rememberChoose,"onUpdate:modelValue":t[2]||(t[2]=t=>e.rememberChoose=t),label:"rememberChoose"},null,8,["modelValue"])])),e.isMobile?((0,o.uX)(),(0,o.Wv)(g,{key:7,icon:["fas","ellipsis-h"],size:"lg",onClick:(0,l.D$)(e.openPopover,["stop"])},null,8,["onClick"])):(0,o.Q3)("",!0)],2)]),(0,o.bF)(h,{visible:e.visiblePopover,"onUpdate:visible":t[5]||(t[5]=t=>e.visiblePopover=t)},{default:(0,o.k6)(()=>[(0,o.bF)(m,null,{default:(0,o.k6)(()=>[(0,o.bF)(v,{onClick:e.openImageSettingsModal},{default:(0,o.k6)(()=>[(0,o.bF)(g,{size:"xl",icon:["fas","sliders"]}),(0,o.Lk)("span",null,(0,c.v_)(e.t("settings")),1)]),_:1},8,["onClick"]),(0,o.bF)(v,{onClick:e.openCameraModal},{default:(0,o.k6)(()=>[(0,o.bF)(g,{size:"xl",icon:["fas","camera"]}),(0,o.Lk)("span",null,(0,c.v_)(e.t("takePhoto")),1)]),_:1},8,["onClick"]),(0,o.bF)(v,{onClick:e.saveToDevice},{default:(0,o.k6)(()=>[(0,o.bF)(g,{size:"xl",icon:["fas","download"]}),(0,o.Lk)("span",null,(0,c.v_)(e.t("download")),1)]),_:1},8,["onClick"])]),_:1}),(0,o.bF)(m,null,{default:(0,o.k6)(()=>[(0,o.bF)(v,{onClick:e.saveToGallery},{default:(0,o.k6)(()=>[(0,o.bF)(g,{size:"xl",icon:["fas","images"]}),(0,o.Lk)("span",null,(0,c.v_)(e.t("saveToGallery")),1)]),_:1},8,["onClick"]),(0,o.bF)(v,{onClick:e.openImageModal},{default:(0,o.k6)(()=>[(0,o.bF)(g,{size:"xl",icon:["fas","fa-pencil-square"]}),(0,o.Lk)("span",null,(0,c.v_)(e.t("addSign")),1)]),_:1},8,["onClick"])]),_:1}),(0,o.bF)(m,null,{default:(0,o.k6)(()=>[(0,o.bF)(v,null,{default:(0,o.k6)(()=>[(0,o.bF)(p,{modelValue:e.sharedWithCollage,"onUpdate:modelValue":t[3]||(t[3]=t=>e.sharedWithCollage=t)},null,8,["modelValue"]),(0,o.Lk)("span",null,(0,c.v_)(e.t("shareImageWithCollage")),1)]),_:1}),(0,o.bF)(v,null,{default:(0,o.k6)(()=>[(0,o.bF)(p,{modelValue:e.rememberChoose,"onUpdate:modelValue":t[4]||(t[4]=t=>e.rememberChoose=t)},null,8,["modelValue"]),(0,o.Lk)("span",null,(0,c.v_)(e.t("rememberChoose")),1)]),_:1})]),_:1})]),_:1},8,["visible"])],64)}const _o={class:"card-number"},Ro={class:"segments"};function So(e,t,a,l,s,n){return(0,o.uX)(),(0,o.CE)("div",{class:(0,c.C4)(["card",{cardSelected:e.isSelected}]),onClick:t[0]||(t[0]=(...t)=>e.selected&&e.selected(...t))},[(0,o.Lk)("div",_o,(0,c.v_)(e.card.id),1),(0,o.Lk)("div",Ro,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.card.segments,e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"segment",style:(0,c.Tr)({backgroundColor:e.color})},null,4))),128))])],2)}var To=(0,o.pM)({props:{card:{type:Object,required:!0},isSelected:{type:Boolean,default:!1}},emits:["selected"],setup(e,{emit:t}){const a=()=>{t("selected",e.card)};return{selected:a}}});const Ao=(0,h.A)(To,[["render",So],["__scopeId","data-v-1b18a9a8"]]);var xo=Ao;const Po=["width","height"];function Wo(e,t,a,l,s,n){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("canvas",{ref:"canvasRef",width:e.sizeRef,height:e.sizeRef},null,8,Po)])}a(7588);var Ko=(0,o.pM)({name:"AppEditorCanvas",props:{segments:{type:Array,required:!0},imageUrl:{type:[String,null],default:null}},emits:["update:imageUrl"],setup(e,{emit:t}){const a=(0,i.Pj)(),l=(0,n.KR)(null),s=(0,n.KR)(null),r=(0,n.KR)(null),c=(0,n.KR)(90),d=(0,n.KR)(480),u=(0,n.KR)(0),p=(0,n.KR)(null),g=(0,n.KR)(0),v=(0,n.KR)(0);let m=!1;const h=async()=>{if(!l.value)return;const t=l.value.getContext("2d");t.clearRect(0,0,d.value,d.value),e.imageUrl&&!m&&(s.value=await k(e.imageUrl),m=!0),F(t),_(t)},{getCanvasSrc:f,saveImage:y,loadImage:k,resetImage:b,zoomPlus:C,zoomMinus:w,zoom:E}=ha(l,h,t),I=()=>l.value,L=()=>f(),M=()=>{y()},F=e=>{const t=d.value/2,a=c.value,l=s.value;if(!l)return;e.save(),e.beginPath(),e.arc(t,t,t-a,0,2*Math.PI),e.closePath(),e.clip(),e.translate(t+(g.value??0),t+(v.value??0)),e.rotate(u.value*Math.PI/180);const o=d.value-2*a,n=Math.min(l.width,l.height),i=o*E.value;e.drawImage(l,(l.width-n)/2,(l.height-n)/2,n,n,-i/2,-i/2,i,i),e.restore()},_=t=>{const a=d.value/2,l=c.value,o=2*Math.PI/e.segments.length,s=p.value??-Math.PI/2;t.lineWidth=l,e.segments.forEach((e,n)=>{t.beginPath(),t.strokeStyle=e.color;const i=n*o+s,r=(n+1)*o+s;t.arc(a,a,a-l/2,i,r),t.stroke()})};return(0,o.sV)(h),(0,o.wB)(()=>e.imageUrl,e=>{e&&!r.value&&(r.value=e),e&&r.value&&(m=!1,E.value=1,r.value=e),h()}),(0,o.wB)(()=>a.getters["mobile/clientWidth"],e=>e<600?(c.value=60,d.value=320,void(0,o.dY)(()=>h())):e<1024?(c.value=70,d.value=400,void(0,o.dY)(()=>h())):e>1024?(c.value=90,d.value=520,void(0,o.dY)(()=>h())):void 0,{immediate:!0}),(0,o.wB)(()=>e.segments,()=>{(0,o.dY)(()=>h())}),{canvasRef:l,resetImage:b,triggerSaveImage:M,zoomPlus:C,zoomMinus:w,sizeRef:d,getCanvasValue:I,getImageSrc:L}}});const Do=(0,h.A)(Ko,[["render",Wo]]);var Xo=Do;const Bo={class:"modal-content neon"},Vo={class:"cards"},Uo={ref:"viewer",class:"cam-wrap"},Oo={ref:"video",autoplay:"",playsinline:"",muted:""},Go={ref:"overlay",class:"overlay"},zo={key:2},Qo=["src"],jo={class:"btn"};function Ho(e,t,a,l,s,n){const i=(0,o.g2)("app-loader"),r=(0,o.g2)("app-color-card"),c=(0,o.g2)("app-overlay-panel"),d=(0,o.g2)("app-modal-header"),u=(0,o.g2)("AppShutterButton"),p=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)("div",Bo,[e.isLoader?((0,o.uX)(),(0,o.Wv)(i,{key:0})):(0,o.Q3)("",!0),e.modalRef?((0,o.uX)(),(0,o.Wv)(c,{key:1,visible:e.visible,"onUpdate:visible":t[0]||(t[0]=t=>e.visible=t),width:e.isMobile?300:550,target:e.modalRef,position:{x:"left",y:"center"}},{default:(0,o.k6)(()=>[(0,o.Lk)("section",Vo,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.cards,t=>((0,o.uX)(),(0,o.Wv)(r,{key:t.id,card:t,"is-selected":e.selectedCard?.id===t?.id,onSelected:e.selected},null,8,["card","is-selected","onSelected"]))),128))])]),_:1},8,["visible","width","target"])):(0,o.Q3)("",!0),(0,o.bF)(d,{onClose:e.close},null,8,["onClose"]),(0,o.Lk)("div",Uo,[(0,o.Lk)("video",Oo,null,512),(0,o.Lk)("canvas",Go,null,512)],512),e.isLoader?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("footer",zo,[(0,o.Lk)("div",{class:"image",onClick:t[1]||(t[1]=(...t)=>e.goBackWithResult&&e.goBackWithResult(...t))},[e.photo?((0,o.uX)(),(0,o.CE)("img",{key:0,src:e.photo,alt:"photo"},null,8,Qo)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",jo,[(0,o.bF)(u,{onCapture:e.takePhotoWithFrameMasked},null,8,["onCapture"])]),(0,o.Lk)("div",{ref:"modalRef",class:"settings",onClick:t[2]||(t[2]=(...t)=>e.openOverlayPanel&&e.openOverlayPanel(...t))},[(0,o.bF)(p,{size:"xl",icon:["fas","sliders"]})],512)]))])}function No(e,t,a,s,n,i){return(0,o.uX)(),(0,o.CE)("button",{ref:"btn",class:(0,c.C4)(["shutter",{active:e.isActive,pressed:e.isPressed}]),"aria-label":"Сделать снимок",type:"button",onPointerdown:t[0]||(t[0]=(...t)=>e.onPointerDown&&e.onPointerDown(...t)),onPointerup:t[1]||(t[1]=(...t)=>e.onPointerUp&&e.onPointerUp(...t)),onPointercancel:t[2]||(t[2]=(...t)=>e.onPointerCancel&&e.onPointerCancel(...t)),onPointerleave:t[3]||(t[3]=(...t)=>e.onPointerCancel&&e.onPointerCancel(...t)),onClick:t[4]||(t[4]=(...t)=>e.emitCapture&&e.emitCapture(...t)),onKeydown:[t[5]||(t[5]=(0,l.jR)((0,l.D$)((...t)=>e.onKeyPress&&e.onKeyPress(...t),["prevent"]),["space"])),t[6]||(t[6]=(0,l.jR)((0,l.D$)((...t)=>e.onKeyPress&&e.onKeyPress(...t),["prevent"]),["enter"]))]},[t[7]||(t[7]=(0,o.Lk)("span",{class:"ring","aria-hidden":"true"},null,-1)),t[8]||(t[8]=(0,o.Lk)("span",{class:"inner","aria-hidden":"true"},null,-1)),e.ripple.visible?((0,o.uX)(),(0,o.CE)("span",{key:0,class:"ripple",style:(0,c.Tr)(e.ripple.style)},null,4)):(0,o.Q3)("",!0)],34)}var $o=(0,o.pM)({emits:["capture"],setup(e,{emit:t}){const a=(0,n.KR)(null),l=(0,n.KR)(!1),s=(0,n.KR)(!1),i=(0,n.KR)({visible:!1,style:{}}),r=()=>{t("capture"),c()},c=()=>{a.value&&(l.value=!0,setTimeout(()=>l.value=!1,120))},d=()=>{s.value=!0,v()},u=()=>{s.value=!1},p=()=>{s.value=!1},g=()=>{s.value=!0,setTimeout(()=>s.value=!1,150),r()},v=()=>{const e=a.value;if(!e)return;const t=e.getBoundingClientRect(),l=t.width/2,s=t.height/2,n=1.6*Math.max(t.width,t.height);i.value.style={width:`${n}px`,height:`${n}px`,left:l-n/2+"px",top:s-n/2+"px",transform:"scale(0.1)",opacity:"0.28"},i.value.visible=!0,(0,o.dY)(()=>{requestAnimationFrame(()=>{i.value.style={...i.value.style,transition:"transform 420ms cubic-bezier(.2,.9,.2,1), opacity 420ms linear",transform:"scale(1)",opacity:"0"},setTimeout(()=>{i.value.visible=!1,i.value.style={}},450)})})};return{btn:a,isActive:l,isPressed:s,ripple:i,onPointerDown:d,onPointerUp:u,onPointerCancel:p,onKeyPress:g,emitCapture:r}}});const Yo=(0,h.A)($o,[["render",No],["__scopeId","data-v-d104a512"]]);var qo=Yo,Jo=(0,o.pM)({components:{AppLoader:Vl,AppOverlayPanel:Ee,AppShutterButton:qo,AppColorCard:xo,AppModalHeader:ol},emits:["resolve","reject","close"],setup(e,{emit:t}){const a=(0,i.Pj)(),l=(0,o.EW)(()=>"mobile"===a.getters["mobile/breakPoint"]),s=sa,r=(0,n.KR)(null),c=(0,n.KR)(null),d=(0,n.KR)(null),u=(0,n.KR)(null),p=(0,n.KR)(null),g=(0,n.KR)(null),v=(0,n.KR)(null),m=(0,n.KR)(null),h=(0,n.KR)(!1),f=(0,n.KR)(null),y=(0,n.KR)(),k=(0,n.KR)(!1);(0,o.KC)(()=>{const[e]=s;f.value=e,y.value=e.segments}),(0,o.sV)(()=>{w()}),(0,o.xo)(()=>{p.value&&(p.value.getTracks().forEach(e=>e.stop()),p.value=null)});const b=()=>{t("close")},C=()=>{const e=c.value;if(!e)return;const t=e.getBoundingClientRect(),a=l.value?300:t.width,o=l.value?150:t.height,s=window.devicePixelRatio||1,n=Math.round(a*s),i=Math.round(o*s);e.width===n&&e.height===i||(e.width=n,e.height=i);const r=e.getContext("2d");if(!r)return;r.setTransform(s,0,0,s,0,0),r.clearRect(0,0,a,o);const d=Math.max(6,Math.round(.02*Math.min(a,o))),u=l.value?20:80,p=l.value?.8:2,g=a/2,v=o/2,m=Math.min(a,o)/2-d-u/p,h=y.value.length,f=2*Math.PI/h,k=-Math.PI/2;r.save(),r.lineWidth=u,r.lineCap="butt";for(let l=0;l<h;l++){const e=l*f+k,t=(l+1)*f+k;r.beginPath(),r.strokeStyle=y.value[l].color,r.arc(g,v,m,e,t,!1),r.stroke()}r.restore()},w=async()=>{k.value=!0;try{if(p.value=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),!r.value)return;r.value.srcObject=p.value,await new Promise(e=>{const t=()=>{r.value?.removeEventListener("loadedmetadata",t),e()};r.value?.addEventListener("loadedmetadata",t)}),await r.value.play(),k.value=!1,C()}catch(e){console.error("Camera error",e),k.value=!1}},E=async()=>{const e=r.value,t=l.value?320:520;if(!e||!e.videoWidth||!e.videoHeight)return;const a=document.createElement("canvas"),o=window.devicePixelRatio||1;a.width=Math.round(t*o),a.height=Math.round(t*o),a.style.width=`${t}px`,a.style.height=`${t}px`;const s=a.getContext("2d");s.setTransform(o,0,0,o,0,0),s.clearRect(0,0,t,t);const n=e.videoWidth,i=e.videoHeight,c=n/i,d=1;let p=0,v=0,m=n,h=i;c>d?(h=i,m=Math.round(h*d),p=Math.round(.5*(n-m)),v=0):(m=n,h=Math.round(m/d),p=0,v=Math.round(.5*(i-h)));const f=(l.value,1.6),y=0,k=0,b=Math.max(1,Math.round(m/f)),C=Math.max(1,Math.round(h/f)),w=p+m/2+y*(m/2),E=v+h/2+k*(h/2);p=Math.round(w-b/2),v=Math.round(E-C/2),p=Math.max(0,Math.min(n-b,p)),v=Math.max(0,Math.min(i-C,v)),m=b,h=C,s.imageSmoothingEnabled=!0,s.drawImage(e,p,v,m,h,0,0,t,t),g.value=a.toDataURL("image/png"),u.value=a},I=e=>{f.value=e,y.value=e.segments,C()},L=async()=>{const e=await new Promise(e=>{u.value&&u.value.toBlob(t=>e(t),"image/png")});if(!e)return null;const a=new File([e],"avatar.png",{type:"image/png",lastModified:Date.now()});t("resolve",{file:a,selectedCard:f.value})},M=()=>{h.value=!0};return{video:r,canvas:d,viewer:v,photo:g,overlay:c,takePhotoWithFrameMasked:E,cards:s,selectedCard:f,selected:I,goBackWithResult:L,close:b,modalRef:m,visible:h,openOverlayPanel:M,isMobile:l,isLoader:k}}});const Zo=(0,h.A)(Jo,[["render",Ho],["__scopeId","data-v-6c9e6caa"]]);var es=Zo,ts=(0,o.pM)({components:{AppCheckbox:Va,AppPopoverItem:Ca,AppPopoverWrapper:Ma,AppPopover:Aa,AppButton:Je,AppEditorCanvas:Xo,AppColorCard:xo},emits:["fileOnLoad","isLoading"],setup(e,{emit:t}){const a=(0,n.KR)(null),{t:l}=(0,r.s9)(),s=(0,n.KR)(),c=(0,i.Pj)(),d=(0,n.KR)(!1),u=sa,p=(0,n.KR)(null),g=(0,n.KR)(),v=(0,n.KR)(null),m=(0,n.KR)(!1),h=(0,n.KR)(c.getters["imageColor/shareImgCollage"]),f=(0,n.KR)(c.getters["imageColor/rememberImgMask"]),y=(0,o.EW)(()=>c.getters["imageColor/imgCollage"]),k=(0,o.EW)(()=>c.getters["imageColor/imgMask"]),b=(0,o.EW)(()=>c.getters["imageColor/getOriginalImgMask"]),C=(0,o.EW)(()=>c.getters["authFirebase/currentUser"]),w=(0,o.EW)(()=>"mobile"===c.getters["mobile/breakPoint"]);(0,o.KC)(()=>{const[e]=u;p.value=e,g.value=e.segments}),(0,o.sV)(()=>{if(h.value){const e=k.value;e&&I(e)}});const I=async e=>{v.value=await Ua(e),await c.dispatch("imageColor/uploadImgMask",{file:e})},L=async()=>{if(v.value){m.value=!0,d.value=!1,w.value&&t("isLoading",!0);try{await c.dispatch("gallery/saveImageToGallery",{canvas:a.value?.getCanvasValue(),title:"",coloristicType:"mask",maskType:p.value?.type,userId:C.value?.uid})}finally{m.value=!1,w.value&&t("isLoading",!1)}}else await c.dispatch("toast/addToast",{message:"Upload image",severity:"warning"})},M=e=>{p.value=e,g.value=e.segments},F=()=>{d.value=!0},_=async()=>{const e=a.value?.getImageSrc();await E(jl,{url:e,coloristicType:"mask",maskType:p.value?.type,currentUserId:C.value?.uid,canvas:a.value?.getCanvasValue(),imageUrl:v.value})},R=async()=>{d.value=!1;const e=b.value;let t=null;e&&(t=await Ua(e)),await E(no,{imageUrl:t}).then(e=>{e.originalFile&&c.dispatch("imageColor/setOriginalImgMask",{file:e.originalFile}),c.dispatch("imageColor/uploadImgMask",{file:e.file}),I(e.file)})};(0,o.wB)(h,e=>{c.dispatch("imageColor/setShareImgCollage",{share:e})}),(0,o.wB)(f,e=>{c.dispatch("imageColor/setRememberImgMask",{remember:e})}),(0,o.wB)(y,async e=>{c.getters["imageColor/shareImgMask"]&&(v.value=await Ua(e))});const S=()=>{a.value?.triggerSaveImage()},T=async()=>{await E(es,{}).then(e=>{c.dispatch("imageColor/uploadImgMask",{file:e.file}),I(e.file),M(e.selectedCard)})};return{frameColors:g,imageUrl:v,onFileSelected:I,cards:u,selected:M,selectedCard:p,visiblePopover:d,isMobile:w,openPopover:F,uploader:s,t:l,saveToGallery:L,isSaveToGallery:m,editorCanvasRef:a,sharedWithCollage:h,rememberChoose:f,openImageModal:_,openImageSettingsModal:R,saveToDevice:S,openCameraModal:T}}});const as=(0,h.A)(ts,[["render",Fo],["__scopeId","data-v-3840ac7a"]]);var ls=as,os=(0,o.pM)({components:{AppLoader:Vl,AppColorMask:ls,AppCollage:ho,AppTab:Yt,AppTabs:jt},setup(){const e=(0,n.KR)(null),t=(0,n.KR)(!1),a=t=>{e.value=t};return{imageUrl:e,fileOnLoad:a,isLoading:t}}});const ss=(0,h.A)(os,[["render",Xt],["__scopeId","data-v-842a2932"]]);var ns=ss;const is={namespaced:!0,state:()=>({toasts:[],counter:0}),mutations:{ADD_TOAST(e,t){const a=e.counter++;e.toasts.push({id:a,...t}),setTimeout(()=>{const t=e.toasts.findIndex(e=>e.id===a);-1!==t&&e.toasts.splice(t,1)},t.duration)},DELETE_TOAST(e,t){const a=e.toasts.findIndex(e=>e.id===t);-1!==a&&e.toasts.splice(a,1)}},actions:{addToast({commit:e},t){e("ADD_TOAST",{message:t.message,severity:t.severity||"info",duration:t.duration||4e3})},deleteToast({commit:e},t){e("DELETE_TOAST",t.id)}},getters:{getToasts(e){return e.toasts}}},rs={namespaced:!0,state:()=>({theme:"light",isDark:!1}),mutations:{INIT_THEME(e){let t=localStorage.getItem("theme");t&&(e.theme=t,e.isDark="dark"===t,document.documentElement.classList.toggle("dark",e.isDark))},SET_THEME(e,t){e.theme=t?"dark":"light",e.isDark=t,document.documentElement.classList.toggle("dark",t),localStorage.setItem("theme",e.theme)}},actions:{initTheme({commit:e}){e("INIT_THEME")},setTheme({commit:e},t){e("SET_THEME",t)}},getters:{isDark(e){return e.isDark}}},cs={namespaced:!0,state:()=>({language:"en"}),mutations:{INIT_LANGUAGE(e){let t=localStorage.getItem("language");t&&(e.language=t)},SET_LANGUAGE(e,t){e.language=t.language,localStorage.setItem("language",t.language)}},actions:{initLanguage({commit:e}){e("INIT_LANGUAGE")},setLanguage({commit:e},t){e("SET_LANGUAGE",t)}},getters:{language(e){return e.language}}},ds={"auth/invalid-credential":"incorrectLoginPassword","auth/user-not-found":"userNotFound"},us={namespaced:!0,state:()=>({user:null,loading:!1}),getters:{isAuthenticated:e=>{const t=localStorage.getItem("user"),a=t?JSON.parse(t):null;return!!e.user||!!a},currentUser:e=>e.user,isLoading:e=>e.loading,getUserId:()=>{const e=localStorage.getItem("user");return e?JSON.parse(e).uid:null}},mutations:{setUser(e,t){e.user=t,localStorage.setItem("user",JSON.stringify(t))},setLoading(e,t){e.loading=t}},actions:{async login({commit:e,dispatch:t},{email:a,password:l}){e("setLoading",!0);try{const t=await(0,ra.x9)(ga,a,l);e("setUser",t.user)}catch(o){throw t("toast/addToast",{message:ds[o.code],severity:"error",duration:3e3},{root:!0}),e("setLoading",!1),o}finally{e("setLoading",!1)}},async logout({commit:e}){await(0,ra.CI)(ga),e("setUser",null)}}},ps={namespaced:!0,state:()=>({clientWidth:0,breakPoint:"desktop"}),mutations:{SET_CLIENT_WIDTH(e,t){e.clientWidth=t.clientWidth,t.clientWidth<600&&(e.breakPoint="mobile"),t.clientWidth>600&&t.clientWidth<1024&&(e.breakPoint="tablet"),t.clientWidth>1024&&t.clientWidth<1440&&(e.breakPoint="desktop"),t.clientWidth>1440&&(e.breakPoint="fullScreen")}},actions:{setClientWidth({commit:e},t){e("SET_CLIENT_WIDTH",t)}},getters:{clientWidth(e){return e.clientWidth},breakPoint(e){return e.breakPoint}}},gs={namespaced:!0,state:()=>({isOpen:!1}),mutations:{SET_BURGER(e,t){e.isOpen=t.isOpen}},actions:{setBurger({commit:e},t){e("SET_BURGER",t)}},getters:{isOpen(e){return e.isOpen}}},vs={namespaced:!0,state:()=>({rememberImgMask:!0,rememberImgCollage:!0,shareImgMask:!0,shareImgCollage:!0,imgMask:null,imgCollage:null,originalImgMask:null,originalImgCollage:null}),mutations:{UPLOAD_IMG_MASK(e,t){e.imgMask=t.file},SET_ORIGINAL_IMG_MASK(e,t){e.originalImgMask=t.file},UPLOAD_IMG_COLLAGE(e,t){e.imgCollage=t.file},SET_ORIGINAL_IMG_COLLAGE(e,t){e.originalImgCollage=t.file},SET_REMEMBER_IMG_MASK(e,t){e.rememberImgMask=t.remember},SET_REMEMBER_IMG_COLLAGE(e,t){e.rememberImgCollage=t.remember},SET_SHARE_IMG_COLLAGE(e,t){e.shareImgCollage=t.share},SET_SHARE_IMG_MASK(e,t){e.shareImgMask=t.share}},actions:{uploadImgMask({commit:e},t){e("UPLOAD_IMG_MASK",t)},setOriginalImgMask({commit:e},t){e("SET_ORIGINAL_IMG_MASK",t)},uploadImgCollage({commit:e},t){e("UPLOAD_IMG_COLLAGE",t)},setOriginalImgCollage({commit:e},t){e("SET_ORIGINAL_IMG_COLLAGE",t)},setRememberImgCollage({commit:e},t){e("SET_REMEMBER_IMG_COLLAGE",t)},setRememberImgMask({commit:e},t){e("SET_REMEMBER_IMG_MASK",t)},setShareImgCollage({commit:e},t){e("SET_SHARE_IMG_COLLAGE",t)},setShareImgMask({commit:e},t){e("SET_SHARE_IMG_MASK",t)}},getters:{rememberImgMask(e){return e.rememberImgMask},rememberImgCollage(e){return e.rememberImgCollage},shareImgMask(e){return e.shareImgMask},shareImgCollage(e){return e.shareImgCollage},imgMask(e){return e.imgMask},imgCollage(e){return e.imgCollage},getOriginalImgMask(e){return e.originalImgMask},getOriginalImgCollage(e){return e.originalImgCollage}}};a(1701),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);function ms(e){const t=[],a=e.toLowerCase().split(/\s+/);for(const l of a){for(let e=1;e<=l.length;e++)t.push(l.substring(0,e));for(let e=0;e<l.length;e++)t.push(l[e])}return t}const hs={namespaced:!0,state:()=>({images:[],isLoading:!1,lastDoc:null,totalImages:0,filter:null,isSelectedMode:!1,selectedImages:new Map}),mutations:{SET_IMAGES(e,t){e.images=[...e.images,...t.items],e.lastDoc=t.lastDoc,e.totalImages=t.totalImages},RESET_IMAGES(e){e.images=[],e.lastDoc=null,e.totalImages=0},SET_LOADING(e,t){e.isLoading=t},SET_FILTER(e,t){e.filter=t},UPDATE_IMAGE(e,t){const a=e.images.findIndex(e=>e.id===t.id);-1!==a&&(e.images[a]={...e.images[a],...t})},DELETE_IMAGE(e,t){e.images=e.images.filter(e=>e.id!==t),e.totalImages=Math.max(0,e.totalImages-1)},DELETE_IMAGES(e,t){const a=new Set(t);e.images=e.images.filter(e=>!a.has(e.id)),e.totalImages=Math.max(0,e.totalImages-t.length);const l=e.selectedImages;t.forEach(e=>l.delete(e)),e.selectedImages=l},SET_SELECTED_MODE(e,t){e.isSelectedMode=t},SET_SELECTED(e,t){const a=e.selectedImages;a.has(t.id)?a.delete(t.id):a.set(t.id,t),e.selectedImages=a},SET_SELECTED_ALL(e,t){const a=e.selectedImages;t.forEach(e=>a.set(e.id,e)),e.selectedImages=a},CLEAR_SELECTED(e){e.selectedImages=new Map}},actions:{async saveImageToGallery({dispatch:e},{canvas:t,path:a=`avatar/${Date.now()}.png`,title:l="",coloristicType:o,maskType:s,userId:n,folderId:i="",deprecated:r=!1}){return new Promise((c,d)=>{t.toBlob(async t=>{if(!t)return d(new Error("Не удалось получить Blob из canvas"));try{const d=(0,na.KR)(ma,a);await(0,na.D)(d,t);const u=await(0,na.qk)(d);await(0,ca.gS)((0,ca.rJ)(va,"gallery","NoUcXcCCYhRoogXFHJfV","items"),{userId:n,url:u,title:l,coloristicType:o,maskType:s,folderId:i,createdAt:new Date,deprecated:r,tokens:ms(l)}),await e("toast/addToast",{message:"successImage",severity:"success"},{root:!0}),c(u)}catch(u){await e("toast/addToast",{message:"errorImage",severity:"error"},{root:!0}),d(u)}},"image/png")})},async initUserGalleryItems({dispatch:e,commit:t,rootGetters:a},{userId:l,options:o={},reset:s=!1}){t("SET_LOADING",!0);try{s&&t("RESET_IMAGES");const{maskType:e,coloristicType:n,title:i,pageSize:r=20,lastDoc:c,folderId:d}=o,u=(0,ca.rJ)(va,"gallery","NoUcXcCCYhRoogXFHJfV","items"),p=[(0,ca._M)("userId","==",l)],g=[(0,ca._M)("userId","==",l)];n&&(p.push((0,ca._M)("coloristicType","==",n)),g.push((0,ca._M)("coloristicType","==",n))),e&&(p.push((0,ca._M)("maskType","==",e)),g.push((0,ca._M)("maskType","==",e))),d&&(p.push((0,ca._M)("folderId","==",d)),g.push((0,ca._M)("folderId","==",d))),i&&(p.push((0,ca._M)("tokens","array-contains",i.toLowerCase())),g.push((0,ca._M)("tokens","array-contains",i.toLowerCase()))),p.push((0,ca.My)("createdAt","desc")),c&&p.push((0,ca.HM)(c)),p.push((0,ca.AB)(r));const v=(0,ca.P)(u,...p),m=(0,ca.P)(u,...g),h=await(0,ca.d_)(m),f=await(0,ca.GG)(v),y=f.docs.map(e=>{const t=e.data();return{id:e.id,src:t.url,title:t.title,coloristicType:t.coloristicType,maskType:t.maskType,folder:a["folder/getFolderById"](t.folderId)}});t("SET_IMAGES",{items:y,lastDoc:f.docs.length>0?f.docs[f.docs.length-1]:null,totalImages:h.data().count})}catch(n){await e("toast/addToast",{message:"Ошибка загрузки",severity:"error"},{root:!0})}finally{t("SET_LOADING",!1)}},async updateImageInGallery({dispatch:e,commit:t},a){try{const l=(0,ca.H9)(va,"gallery","NoUcXcCCYhRoogXFHJfV","items",a.id);await(0,ca.mZ)(l,{...a,updatedAt:new Date,tokens:a?.title?ms(a.title):[]}),t("UPDATE_IMAGE",a),await e("toast/addToast",{message:"successUpdate",severity:"success"},{root:!0})}catch(l){throw await e("toast/addToast",{message:"errorUpdate",severity:"error"},{root:!0}),l}},async deleteImageFromGallery({dispatch:e,commit:t},{id:a}){try{const l=(0,ca.H9)(va,"gallery","NoUcXcCCYhRoogXFHJfV","items",a);await(0,ca.kd)(l),t("DELETE_IMAGE",a),await e("toast/addToast",{message:"successDelete",severity:"success"},{root:!0})}catch(l){throw await e("toast/addToast",{message:"errorDelete",severity:"error"},{root:!0}),l}},async deleteImagesFromGallery({dispatch:e,commit:t},a){try{await Promise.all(a.map(e=>{const t=(0,ca.H9)(va,"gallery","NoUcXcCCYhRoogXFHJfV","items",e);return(0,ca.kd)(t)})),t("DELETE_IMAGES",a),await e("toast/addToast",{message:"successDelete",severity:"success"},{root:!0})}catch(l){throw await e("toast/addToast",{message:"errorDelete",severity:"error"},{root:!0}),l}},setFilter(e,t){e.commit("SET_FILTER",t)},setSelectedMode(e,t){e.commit("SET_SELECTED_MODE",t)},setSelected(e,t){e.commit("SET_SELECTED",t)},setSelectedAll(e,t){e.commit("SET_SELECTED_ALL",t)},clearSelected(e){e.commit("CLEAR_SELECTED")}},getters:{getImages(e){return e.images},getTotalImages(e){return e.totalImages},getLastDoc(e){return e.lastDoc},isLoading(e){return e.isLoading},getFilter(e){return e.filter},getSelectedMode(e){return e.isSelectedMode},getSelected(e){return[...e.selectedImages.values()]},isSelected:e=>t=>e.selectedImages.has(t)}},fs={namespaced:!0,state:()=>({items:[],filterItems:[],isLoading:!1}),mutations:{SET_FOLDERS(e,t){e.items=t,e.filterItems=t},ADD_FOLDERS(e,t){e.items.push(t)},SET_LOADING(e,t){e.isLoading=t},REMOVE_FOLDER(e,t){e.items=e.items.filter(e=>e.id!==t),e.filterItems=e.items},UPDATE_FOLDER(e,t){const a=e.items.findIndex(e=>e.id===t.id);-1!==a&&(e.items[a]={...e.items[a],...t},e.filterItems[a]={...e.items[a],...t})},FILTER_FOLDER(e,t){e.filterItems=t?e.items.filter(e=>e.name.toLowerCase().trim().includes(t.toLowerCase().trim())):e.items}},actions:{async saveFolder({dispatch:e,commit:t},{userId:a,name:l}){t("SET_LOADING",!0);try{const o=(0,ca.rJ)(va,"folder","bCxB7W5QIQZQAOSBcbfa","items"),s=await(0,ca.gS)(o,{userId:a,name:l,createdAt:new Date});t("ADD_FOLDERS",{id:s.id,userId:a,name:l,createdAt:new Date}),await e("toast/addToast",{message:"successFolderCreate",severity:"success"},{root:!0})}catch(o){await e("toast/addToast",{message:"errorFolder",severity:"error"},{root:!0})}finally{t("SET_LOADING",!1)}},async getFolders({dispatch:e,commit:t},a){t("SET_LOADING",!0);try{const e=(0,ca.rJ)(va,"folder","bCxB7W5QIQZQAOSBcbfa","items"),l=(0,ca.P)(e,(0,ca._M)("userId","==",a)),o=await(0,ca.GG)(l),s=o.docs.map(e=>({id:e.id,...e.data()}));return t("SET_FOLDERS",s),s}catch(l){return await e("toast/addToast",{message:"errorLoadFolders",severity:"error"},{root:!0}),[]}finally{t("SET_LOADING",!1)}},async deleteFolder({dispatch:e,commit:t},a){t("SET_LOADING",!0);try{const l=(0,ca.H9)(va,"folder","bCxB7W5QIQZQAOSBcbfa","items",a);await(0,ca.kd)(l),t("REMOVE_FOLDER",a),await e("toast/addToast",{message:"successDeleteFolder",severity:"success"},{root:!0})}catch(l){await e("toast/addToast",{message:"errorDeleteFolder",severity:"error"},{root:!0})}finally{t("SET_LOADING",!1)}},async updateFolder({dispatch:e,commit:t},{id:a,name:l}){t("SET_LOADING",!0);try{const o=(0,ca.H9)(va,"folder","bCxB7W5QIQZQAOSBcbfa","items",a);await(0,ca.mZ)(o,{name:l}),t("UPDATE_FOLDER",{id:a,name:l}),await e("toast/addToast",{message:"successUpdateFolder",severity:"success"},{root:!0})}catch(o){await e("toast/addToast",{message:"errorUpdateFolder",severity:"error"},{root:!0})}finally{t("SET_LOADING",!1)}},filterFolder(e,t){e.commit("FILTER_FOLDER",t)}},getters:{getFolders(e){return e.items},getFilterFolders(e){return e.filterItems},isLoading(e){return e.isLoading},getFolderById:e=>t=>e.items.find(e=>e.id===t)}};var ys=(0,i.y$)({state:{},getters:{},mutations:{},actions:{},modules:{toast:is,theme:rs,language:cs,authFirebase:us,mobile:ps,burgerMenu:gs,imageColor:vs,gallery:hs,folder:fs},plugins:[(0,i.h)()]});const ks={class:"gallery-container"},bs={class:"gallery-wrapper"},Cs={class:"search"},ws={class:"actions-mode"},Es={key:0,class:"choose-checkbox"},Is={key:1,class:"choose-checkbox"},Ls={key:2,class:"filter-fill"},Ms={class:"icon-list-ol"},Fs={class:"icon-ellipsis-h"},_s={key:0,class:"icon"};function Rs(e,t,a,s,n,i){const r=(0,o.g2)("AppLoader"),d=(0,o.g2)("app-input"),u=(0,o.g2)("AppCheckbox"),p=(0,o.g2)("app-button"),g=(0,o.g2)("app-image-card"),v=(0,o.g2)("app-virtual-scroll-grid"),m=(0,o.g2)("font-awesome-icon"),h=(0,o.g2)("app-popover-item"),f=(0,o.g2)("app-popover-wrapper"),y=(0,o.g2)("app-popover");return(0,o.uX)(),(0,o.CE)("div",ks,[e.isLoading?((0,o.uX)(),(0,o.Wv)(r,{key:0})):(0,o.Q3)("",!0),(0,o.Lk)("div",bs,[(0,o.Lk)("section",{class:(0,c.C4)(["gallery-helper",{hidden:e.isHidden}])},[(0,o.Lk)("div",Cs,[(0,o.bF)(d,{modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=t=>e.search=t),placeholder:"search",icon:["fas","search"],"is-label":!1},null,8,["modelValue"])]),(0,o.Lk)("section",ws,[e.isMobile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Es,[(0,o.bF)(u,{modelValue:e.isSelectedMode,"onUpdate:modelValue":t[1]||(t[1]=t=>e.isSelectedMode=t),label:"choose"},null,8,["modelValue"])])),e.isSelectedMode&&!e.isMobile?((0,o.uX)(),(0,o.CE)("div",Is,[(0,o.bF)(u,{modelValue:e.chooseAll,"onUpdate:modelValue":t[2]||(t[2]=t=>e.chooseAll=t),label:"Выбрать все"},null,8,["modelValue"])])):(0,o.Q3)("",!0),(0,o.bF)(p,{severity:"secondary",raised:"",icon:["fas","filter"],onClick:e.openFilterModal},null,8,["onClick"]),e.isFilterEmpty?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Ls))])],2),(0,o.Lk)("section",{ref:"imagesContainer",class:(0,c.C4)(["images",{hidden:e.isHidden}])},[(0,o.bF)(v,{items:e.images,"item-key":e=>e.id,"min-column-width":e.isMobile?100:250,"row-height":e.isMobile?150:300,height:e.heightImagesContainer,onScroll:e.onScroll},{default:(0,o.k6)(({item:t,index:a})=>[(0,o.bF)(g,{src:t.src,image:t,onClick:t=>e.openCardModal(a)},{default:(0,o.k6)(()=>[(0,o.eW)((0,c.v_)(e.t("photo"))+" "+(0,c.v_)(e.getCurrentIndex(t)+1),1)]),_:2},1032,["src","image","onClick"])]),_:1},8,["items","item-key","min-column-width","row-height","height","onScroll"])],2),(0,o.Lk)("footer",{class:(0,c.C4)(["footer",{hidden:e.isHidden}])},[(0,o.Lk)("div",Ms,[(0,o.bF)(m,{size:"sm",icon:["fas","list-ol"]}),(0,o.eW)(" "+(0,c.v_)(e.totalImages),1)]),(0,o.Lk)("div",Fs,[e.isMobile?((0,o.uX)(),(0,o.Wv)(m,{key:0,icon:["fas","ellipsis-h"],size:"lg",onClick:(0,l.D$)(e.openPopover,["stop"])},null,8,["onClick"])):(0,o.Q3)("",!0)]),(0,o.Lk)("section",{class:(0,c.C4)(["selected-section",{mobile:e.isMobile}])},[e.isSelectedMode&&e.selected.length?((0,o.uX)(),(0,o.CE)("div",_s,[(0,o.bF)(m,{size:"sm",icon:["fas","check"]}),(0,o.eW)(" "+(0,c.v_)(e.selected.length),1)])):(0,o.Q3)("",!0),e.isSelectedMode&&e.selected.length?((0,o.uX)(),(0,o.CE)("div",{key:1,class:"icon",onClick:t[3]||(t[3]=(...t)=>e.openDeleteModal&&e.openDeleteModal(...t))},[(0,o.bF)(m,{size:"sm",icon:["fas","fa-trash"]})])):(0,o.Q3)("",!0),e.isSelectedMode&&e.selected.length?((0,o.uX)(),(0,o.CE)("div",{key:2,class:"icon",onClick:t[4]||(t[4]=(...t)=>e.clearSelected&&e.clearSelected(...t))},[(0,o.bF)(m,{size:"sm",icon:["fas","broom"]})])):(0,o.Q3)("",!0)],2)],2),(0,o.bF)(y,{visible:e.visiblePopover,"onUpdate:visible":t[7]||(t[7]=t=>e.visiblePopover=t)},{default:(0,o.k6)(()=>[(0,o.bF)(f,null,{default:(0,o.k6)(()=>[(0,o.bF)(h,null,{default:(0,o.k6)(()=>[(0,o.bF)(u,{modelValue:e.isSelectedMode,"onUpdate:modelValue":t[5]||(t[5]=t=>e.isSelectedMode=t)},null,8,["modelValue"]),(0,o.Lk)("span",null,(0,c.v_)(e.t("choose")),1)]),_:1}),e.isSelectedMode?((0,o.uX)(),(0,o.Wv)(h,{key:0},{default:(0,o.k6)(()=>[(0,o.bF)(u,{modelValue:e.chooseAll,"onUpdate:modelValue":t[6]||(t[6]=t=>e.chooseAll=t)},null,8,["modelValue"]),(0,o.Lk)("span",null,(0,c.v_)(e.t("chooseAll")),1)]),_:1})):(0,o.Q3)("",!0)]),_:1})]),_:1},8,["visible"])])])}const Ss={class:"image-card"},Ts=["src","alt"],As={key:1,class:"fallback"},xs={class:"overlay"};function Ps(e,t,a,s,n,i){const r=(0,o.g2)("AppCheckbox");return(0,o.uX)(),(0,o.CE)("div",Ss,[(0,o.Lk)("div",{class:"checkbox",onClick:t[1]||(t[1]=(0,l.D$)((...t)=>e.selected&&e.selected(...t),["stop"]))},[e.isSelectedMode?((0,o.uX)(),(0,o.Wv)(r,{key:0,modelValue:e.selectedImage,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedImage=t)},null,8,["modelValue"])):(0,o.Q3)("",!0)]),e.error?((0,o.uX)(),(0,o.CE)("div",As,[(0,o.RG)(e.$slots,"fallback",{},()=>[t[4]||(t[4]=(0,o.eW)("⚠️ Ошибка загрузки",-1))],!0)])):((0,o.uX)(),(0,o.CE)("img",{key:0,src:e.src,alt:e.alt,style:(0,c.Tr)({objectFit:e.fit}),loading:"lazy",class:(0,c.C4)({"fade-in":e.loaded}),onError:t[2]||(t[2]=(...t)=>e.onError&&e.onError(...t)),onLoad:t[3]||(t[3]=(...t)=>e.onLoad&&e.onLoad(...t))},null,46,Ts)),(0,o.Lk)("div",xs,[(0,o.RG)(e.$slots,"default",{},void 0,!0)])])}var Ws=(0,o.pM)({components:{AppCheckbox:Va},props:{src:{type:String,required:!0},alt:{type:String,default:""},fit:{type:String,default:"cover"},rounded:{type:Boolean,default:!0},image:{type:Object,required:!0}},setup(e){const t=(0,i.Pj)(),a=(0,n.KR)(!1),l=(0,n.KR)(!1),s=(0,o.EW)(()=>t.getters["gallery/getSelectedMode"]),r=(0,o.EW)(()=>t.getters["gallery/isSelected"](e.image.id)),c=()=>{t.dispatch("gallery/setSelected",e.image)},d=()=>{a.value=!0},u=()=>{l.value=!0};return{error:a,loaded:l,onError:d,onLoad:u,isSelectedMode:s,selected:c,selectedImage:r}}});const Ks=(0,h.A)(Ws,[["render",Ps],["__scopeId","data-v-226ca505"]]);var Ds=Ks;const Xs={ref:"modalRef",class:"modal-content neon"},Bs={class:"overlay-image"},Vs=["src"],Us={class:"info-section scroll-area"},Os={class:"info-section-wrapper"},Gs={class:"slider-dots"},zs={class:"info"},Qs={class:"badge-wrapper"},js={key:0,class:"badge darkBadge"},Hs={key:1,class:"badge darkBadge"},Ns={key:2,class:"badge darkBadge"},$s={key:0,class:"info-title"},Ys={key:1,class:"edit-title"},qs={class:"actions"},Js={class:"btn"};function Zs(e,t,a,s,n,i){const r=(0,o.g2)("app-modal-header"),d=(0,o.g2)("font-awesome-icon"),u=(0,o.g2)("AppCheckbox"),p=(0,o.g2)("app-overlay-panel"),g=(0,o.g2)("app-input"),v=(0,o.g2)("app-button");return(0,o.uX)(),(0,o.CE)("div",Xs,[(0,o.bF)(r,{onClose:e.close},null,8,["onClose"]),(0,o.Lk)("div",{ref:"targetRef",class:"ellipsis-vertical",onClick:t[0]||(t[0]=(...t)=>e.toggleImageOverlayPanel&&e.toggleImageOverlayPanel(...t))},[(0,o.bF)(d,{size:"lg",icon:["fas","fa-ellipsis-vertical"]})],512),(0,o.Lk)("div",{class:"modal-image-choose-checkbox",onClick:t[2]||(t[2]=(0,l.D$)((...t)=>e.selected&&e.selected(...t),["stop"]))},[e.isSelectedMode?((0,o.uX)(),(0,o.Wv)(u,{key:0,modelValue:e.selectedImage,"onUpdate:modelValue":t[1]||(t[1]=t=>e.selectedImage=t)},null,8,["modelValue"])):(0,o.Q3)("",!0)]),e.targetRef?((0,o.uX)(),(0,o.Wv)(p,{key:0,visible:e.visible,"onUpdate:visible":t[6]||(t[6]=t=>e.visible=t),width:250,target:e.targetRef,position:{x:"left",y:"center"}},{default:(0,o.k6)(()=>[(0,o.Lk)("div",Bs,[(0,o.Lk)("div",{class:"overlay-image-item",onClick:t[3]||(t[3]=(...t)=>e.openFolderModal&&e.openFolderModal(...t))},[(0,o.bF)(d,{size:"sm",icon:["fas","fa-folder"]}),(0,o.eW)(" "+(0,c.v_)(e.t("addFolder")),1)]),(0,o.Lk)("div",{class:"overlay-image-item",onClick:t[4]||(t[4]=(...t)=>e.updateFolder&&e.updateFolder(...t))},[(0,o.bF)(d,{size:"sm",icon:["fas","undo"]}),(0,o.eW)(" "+(0,c.v_)(e.t("update")),1)]),(0,o.Lk)("div",{class:"overlay-image-item",onClick:t[5]||(t[5]=(...t)=>e.copyLink&&e.copyLink(...t))},[(0,o.bF)(d,{size:"sm",icon:["fas","fa-link"]}),(0,o.eW)(" "+(0,c.v_)(e.t("copyLink")),1)])])]),_:1},8,["visible","target"])):(0,o.Q3)("",!0),(0,o.Lk)("img",{src:e.currentImage.src,alt:"",class:"modal-image"},null,8,Vs),(0,o.Lk)("section",Us,[(0,o.Lk)("div",Os,[(0,o.Lk)("div",Gs,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.images,(t,a)=>((0,o.uX)(),(0,o.CE)("div",{key:t.id,class:(0,c.C4)(["dot",{active:a===e.index}])},null,2))),128))]),(0,o.Lk)("div",zs,[(0,o.Lk)("div",Qs,[e.localImages[e.index].folder?((0,o.uX)(),(0,o.CE)("span",js,(0,c.v_)(e.localImages[e.index].folder.name),1)):(0,o.Q3)("",!0),e.currentImage.maskType?((0,o.uX)(),(0,o.CE)("span",Hs,(0,c.v_)(e.currentImage.maskType),1)):(0,o.Q3)("",!0),e.currentImage.coloristicType?((0,o.uX)(),(0,o.CE)("span",Ns,(0,c.v_)(e.currentImage.coloristicType),1)):(0,o.Q3)("",!0)]),e.isEditTitle?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",$s,[(0,o.bF)(d,{size:"xs",icon:["fas","fa-pencil"],onClick:t[7]||(t[7]=t=>e.toggleTitle(e.currentImage.title))}),(0,o.Lk)("span",null,(0,c.v_)(e.currentImage.title?e.currentImage.title:e.t("noName")),1)])),e.isEditTitle?((0,o.uX)(),(0,o.CE)("div",Ys,[(0,o.bF)(g,{modelValue:e.sign,"onUpdate:modelValue":t[8]||(t[8]=t=>e.sign=t),icon:["fas","fa-pencil"],"is-label":!1,"is-focused":""},null,8,["modelValue"]),(0,o.Lk)("div",{class:"edit-title-save-icon",onClick:t[9]||(t[9]=(...t)=>e.updateSign&&e.updateSign(...t))},[(0,o.bF)(d,{size:"sm",icon:["fas","undo"]})])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",qs,[(0,o.Lk)("div",Js,[(0,o.bF)(v,{severity:"error",icon:["fas","fa-trash"],onClick:e.deleteImage},null,8,["onClick"])])])])]),e.isMobile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",{key:1,class:"next",onClick:t[10]||(t[10]=(...t)=>e.next&&e.next(...t))},[(0,o.bF)(d,{icon:["fas","fa-arrow-right"]})])),e.isMobile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",{key:2,class:"prev",onClick:t[11]||(t[11]=(...t)=>e.prev&&e.prev(...t))},[(0,o.bF)(d,{icon:["fas","fa-arrow-left"]})]))],512)}var en=(0,o.pM)({components:{AppCheckbox:Va,AppOverlayPanel:Ee,AppModalHeader:ol,AppInput:pe,AppButton:Je},props:{images:{type:Array,required:!0},startIndex:{type:Number,required:!0}},emits:["close"],setup(e,{emit:t}){const{t:a}=(0,r.s9)(),l=(0,i.Pj)(),s=(0,n.KR)(e.startIndex),c=(0,n.KR)(null),d=(0,n.KR)(!1),u=(0,n.KR)(""),p=(0,o.EW)(()=>"mobile"===l.getters["mobile/breakPoint"]),g=(0,o.EW)(()=>e.images[s.value]),v=(0,n.KR)(!1),m=(0,n.KR)(null),h=(0,n.KR)([...e.images]),f=(0,o.EW)(()=>l.getters["gallery/getSelectedMode"]),y=(0,o.EW)(()=>l.getters["gallery/isSelected"](e.images[s.value].id));(0,o.wB)(()=>e.startIndex,e=>{s.value=e});const k=()=>{s.value=(s.value+1)%e.images.length,d.value=!1},b=()=>{s.value=(s.value-1+e.images.length)%e.images.length,d.value=!1},C=()=>{t("close")},w=e=>{d.value=!0,u.value=e},I=async()=>{await E(xl,{text:a("dywDelete"),title:a("delete")}).then(a=>{a&&(l.dispatch("gallery/deleteImageFromGallery",{id:e.images[s.value].id}),t("close"))})},L=()=>{const t=e.images[s.value];d.value=!1,t?.title!==u.value&&l.dispatch("gallery/updateImageInGallery",{...F(t,u.value)})},M=()=>{_(),l.dispatch("gallery/updateImageInGallery",{...F(e.images[s.value])})},F=(e,t)=>({id:e.id,src:e.src,title:t||e.title,coloristicType:e.coloristicType,maskType:e.maskType,folderId:e?.folder?.id??null});(0,o.sV)(()=>{let e=0;const t=t=>{e=t.touches[0].clientX},a=t=>{const a=t.changedTouches[0].clientX;e-a>50&&k(),a-e>50&&b()};c.value&&(c.value.addEventListener("touchstart",t),c.value.addEventListener("touchend",a),c.value._touchHandlers={handleTouchStart:t,handleTouchEnd:a})}),(0,o.hi)(()=>{if(c.value&&c.value._touchHandlers){const{handleTouchStart:e,handleTouchEnd:t}=c.value._touchHandlers;c.value.removeEventListener("touchstart",e),c.value.removeEventListener("touchend",t)}});const _=()=>{v.value=!v.value},R=async()=>{_(),await E(Gl,{folder:e.images[s.value].folder},{transparent:!0}).then(e=>{h.value[s.value].folder=e})},S=async()=>{_();const t=e.images[s.value].src;try{await navigator.clipboard.writeText(t),await l.dispatch("toast/addToast",{message:"Ссылка скопирована!",severity:"success"})}catch(a){await l.dispatch("toast/addToast",{message:"Ошибка копирования!",severity:"error"})}};(0,o.wB)(s,async e=>{await(0,o.dY)();const t=document.querySelectorAll(".slider-dots .dot"),a=t[e];a&&a.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})},{immediate:!0});const T=()=>{l.dispatch("gallery/setSelected",e.images[s.value])};return{index:s,next:k,prev:b,close:C,modalRef:c,isMobile:p,isEditTitle:d,toggleTitle:w,sign:u,deleteImage:I,updateSign:L,currentImage:g,toggleImageOverlayPanel:_,targetRef:m,visible:v,t:a,openFolderModal:R,localImages:h,updateFolder:M,copyLink:S,isSelectedMode:f,selectedImage:y,selected:T}}});const tn=(0,h.A)(en,[["render",Zs],["__scopeId","data-v-3084c3ce"]]);var an=tn;const ln={ref:"modalRef",class:"modal-content neon"},on={class:"wrapper-filter"},sn={class:"filter-dropdown"},nn={class:"folders-overlay-container"},rn={class:"folders-options-wrapper"},cn={class:"option-folder-item"},dn=["src"],un={class:"filter-dropdown"},pn={class:"mask-type-wrapper"},gn={class:"segments"},vn={class:"filter-dropdown"},mn={class:"footer"};function hn(e,t,l,s,n,i){const r=(0,o.g2)("app-modal-header"),d=(0,o.g2)("app-option"),u=(0,o.g2)("app-dropdown"),p=(0,o.g2)("font-awesome-icon"),g=(0,o.g2)("app-button");return(0,o.uX)(),(0,o.CE)("div",ln,[(0,o.bF)(r,{onClose:e.close},null,8,["onClose"]),(0,o.Lk)("section",on,[(0,o.Lk)("div",sn,[(0,o.bF)(u,{modelValue:e.folder,"onUpdate:modelValue":t[1]||(t[1]=t=>e.folder=t),"is-search":!0,"is-title":"",title:"folder",label:"name",height:"48px",onSearch:e.searchFolder},{default:(0,o.k6)(()=>[(0,o.Lk)("div",nn,[(0,o.Lk)("div",rn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.folders,l=>((0,o.uX)(),(0,o.Wv)(d,{key:l,value:l},{default:(0,o.k6)(()=>[(0,o.Lk)("div",cn,[(0,o.Lk)("img",{loading:"lazy",class:(0,c.C4)({"fade-in":e.onLoad}),src:a(2823),alt:"Rainbow Folder",onLoad:t[0]||(t[0]=(...t)=>e.onLoad&&e.onLoad(...t))},null,42,dn),(0,o.Lk)("span",null,(0,c.v_)(l.name),1)])]),_:2},1032,["value"]))),128))])])]),_:1},8,["modelValue","onSearch"])]),(0,o.Lk)("div",un,[(0,o.bF)(u,{modelValue:e.maskType,"onUpdate:modelValue":t[2]||(t[2]=t=>e.maskType=t),height:"48px",label:"type","is-title":"",title:"mask"},{default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.cards,e=>((0,o.uX)(),(0,o.Wv)(d,{key:e,value:e},{default:(0,o.k6)(()=>[(0,o.Lk)("div",pn,[(0,o.Lk)("div",gn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.segments,e=>((0,o.uX)(),(0,o.CE)("div",{key:e,style:(0,c.Tr)({backgroundColor:e.color}),class:"segment"},null,4))),128))]),(0,o.Lk)("span",null,(0,c.v_)(e.type),1)])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),(0,o.Lk)("div",vn,[(0,o.bF)(u,{modelValue:e.coloristicType,"onUpdate:modelValue":t[3]||(t[3]=t=>e.coloristicType=t),height:"48px",label:"name","is-title":"",title:"colorType"},{default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.coloristicTypes,e=>((0,o.uX)(),(0,o.Wv)(d,{key:e,value:e},{default:(0,o.k6)(()=>[(0,o.bF)(p,{icon:["fa",e.icon]},null,8,["icon"]),(0,o.eW)(" "+(0,c.v_)(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),(0,o.Lk)("footer",mn,[(0,o.Lk)("div",{class:"btn",onClick:t[4]||(t[4]=(...t)=>e.clearFilter&&e.clearFilter(...t))},[(0,o.bF)(g,{severity:"info",title:"clear"})]),(0,o.Lk)("div",{class:"btn",onClick:t[5]||(t[5]=(...t)=>e.applyFilter&&e.applyFilter(...t))},[(0,o.bF)(g,{severity:"warning",title:"apply"})])])],512)}var fn=(0,o.pM)({components:{AppOption:Se,AppButton:Je,AppDropdown:Me,AppModalHeader:ol},emits:["resolve","reject","close"],setup(e,{emit:t}){const a=(0,i.Pj)(),l=(0,n.KR)(sa),s=(0,n.KR)(a.getters["gallery/getFilter"]?.maskType),r=(0,n.KR)(a.getters["gallery/getFilter"]?.coloristicType),c=(0,n.KR)([{id:"mask",name:"mask",icon:"mask"},{id:"collage",name:"collage",icon:"images"}]),d=(0,o.EW)(()=>a.getters["folder/getFilterFolders"]),u=(0,n.KR)(a.getters["gallery/getFilter"]?.folder),p=()=>{t("close")},g=e=>{a.dispatch("folder/filterFolder",e)},v=()=>{a.dispatch("gallery/setFilter",{folder:u.value,coloristicType:r.value,maskType:s.value}),t("resolve",!0)},m=()=>{u.value=null,r.value=null,s.value=null,a.dispatch("gallery/setFilter",null)};return{close:p,folder:u,folders:d,searchFolder:g,cards:l,maskType:s,coloristicType:r,coloristicTypes:c,applyFilter:v,clearFilter:m}}});const yn=(0,h.A)(fn,[["render",hn],["__scopeId","data-v-ca719a84"]]);var kn=yn;const bn=e=>0===Object.keys(e).length,Cn=e=>Object.fromEntries(Object.entries(e).filter(([,e])=>e));function wn(e,t,a,l,s,n){return(0,o.uX)(),(0,o.CE)("div",{ref:"container",class:"virtual-grid",style:(0,c.Tr)(e.containerStyle),onScroll:t[0]||(t[0]=(...t)=>e.onScroll&&e.onScroll(...t))},[(0,o.Lk)("div",{class:"spacer",style:(0,c.Tr)({height:e.totalHeight+"px"})},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.visibleItems,(t,a)=>((0,o.uX)(),(0,o.CE)("div",{key:e.itemKey(t),class:"cell",style:(0,c.Tr)(e.cellStyle(e.startIndex+a))},[(0,o.RG)(e.$slots,"default",{item:t,index:e.startIndex+a},void 0,!0)],4))),128))],4)],36)}var En=(0,o.pM)({props:{items:{type:Array,required:!0},itemKey:{type:Function,default:e=>e?.id??JSON.stringify(e)},minColumnWidth:{type:Number,default:250},rowHeight:{type:Number,default:300},gap:{type:Number,default:5},bufferRows:{type:Number,default:20},height:{type:[Number,String],default:400}},emits:["scroll"],setup(e,{emit:t}){const a=(0,n.KR)(null),l=(0,n.KR)(0),s=(0,n.KR)(0),i=(0,n.KR)(0);let r=null;const c=(0,o.EW)(()=>({height:"number"===typeof e.height?`${e.height}px`:String(e.height)})),d=(0,o.EW)(()=>Math.max(1,Math.floor((i.value+e.gap)/(e.minColumnWidth+e.gap)))),u=(0,o.EW)(()=>{const t=d.value;return(i.value-(t-1)*e.gap)/t}),p=(0,o.EW)(()=>Math.ceil(e.items.length/d.value)),g=(0,o.EW)(()=>p.value*e.rowHeight+Math.max(0,p.value-1)*e.gap),v=(0,o.EW)(()=>Math.max(0,g.value-s.value)),m=(0,o.EW)(()=>Math.ceil(s.value/(e.rowHeight+e.gap))+e.bufferRows),h=(0,o.EW)(()=>{const t=Math.floor(l.value/(e.rowHeight+e.gap)),a=Math.max(0,Math.ceil(p.value-m.value));return Math.min(t,a)}),f=(0,o.EW)(()=>h.value*d.value),y=(0,o.EW)(()=>{const t=e.items.length,a=m.value*d.value;return Math.min(f.value+a,t)}),k=(0,o.EW)(()=>e.items.slice(f.value,y.value)),b=(0,o.EW)(()=>h.value*(e.rowHeight+e.gap)),C=(0,o.EW)(()=>Math.floor(y.value/d.value)),w=(0,o.EW)(()=>{const t=Math.max(0,p.value-C.value);return t*(e.rowHeight+e.gap)}),E=()=>{const e=a.value;e&&(s.value=e.clientHeight,i.value=e.clientWidth)},I=t=>{const a=Math.floor(t/d.value),l=t%d.value,o=l*(u.value+e.gap),s=a*(e.rowHeight+e.gap);return{position:"absolute",transform:`translate3d(${Math.round(o)}px, ${Math.round(s)}px, 0)`,width:`${Math.round(u.value)}px`,height:`${e.rowHeight}px`}};let L=null;const M=e=>{t("scroll",e);const a=e.target,o=a.scrollTop;null!=L&&cancelAnimationFrame(L),L=requestAnimationFrame(()=>{l.value=Math.max(0,Math.min(o,v.value)),L=null})};return(0,o.sV)(()=>{(0,o.dY)(()=>E()),a.value&&"ResizeObserver"in window&&(r=new ResizeObserver(()=>E()),r.observe(a.value)),window.addEventListener("resize",E)}),(0,o.xo)(()=>{r?.disconnect(),window.removeEventListener("resize",E)}),{container:a,containerStyle:c,visibleItems:k,startIndex:f,totalHeight:g,topSpacer:b,bottomSpacer:w,cellStyle:I,onScroll:M}}});const In=(0,h.A)(En,[["render",wn],["__scopeId","data-v-2d17e9dd"]]);var Ln=In,Mn=(0,o.pM)({components:{AppVirtualScrollGrid:Ln,AppPopover:Aa,AppPopoverWrapper:Ma,AppPopoverItem:Ca,AppCheckbox:Va,AppLoader:Vl,AppButton:Je,AppInput:pe,AppImageCard:Ds},setup(){const{t:e}=(0,r.s9)(),t=(0,i.Pj)(),a=(0,n.KR)(""),l=(0,n.KR)(null),s=(0,o.EW)(()=>t.getters["gallery/getImages"]),c=(0,n.KR)(null),d=(0,o.EW)(()=>t.getters["authFirebase/getUserId"]),u=(0,o.EW)(()=>t.getters["gallery/getTotalImages"]),p=(0,o.EW)(()=>t.getters["gallery/getLastDoc"]),g=(0,o.EW)(()=>t.getters["gallery/isLoading"]),v=(0,o.EW)(()=>t.getters["gallery/getFilter"]),m=(0,o.EW)(()=>t.getters["gallery/getSelected"]),h=(0,o.EW)(()=>{const e=v.value;return!e||bn(Cn(e))}),f=(0,o.EW)(()=>"mobile"===t.getters["mobile/breakPoint"]),y=(0,n.KR)(!1),k=(0,n.KR)(!1),b=(0,n.KR)(!1),C=(0,n.KR)(!1);let w=0,I=null;(0,o.sV)(async()=>{await t.dispatch("folder/getFolders",d.value),await t.dispatch("gallery/initUserGalleryItems",{userId:d.value,options:{title:a.value,coloristicType:v.value?.coloristicType?.id,maskType:v.value?.maskType?.type,folderId:v.value?.folder?.id},reset:!0})});const L=async e=>{await E(an,{images:s.value,startIndex:e})},M=async()=>{await E(kn,{}).then(e=>{e&&t.dispatch("gallery/initUserGalleryItems",{userId:d.value,options:{title:a.value,coloristicType:v.value?.coloristicType?.id,maskType:v.value?.maskType?.type,folderId:v.value?.folder?.id},reset:!0})})},F=async e=>{const l=e.target,o=Math.ceil(l.scrollTop+l.clientHeight),n=l.scrollTop,i=o>=l.scrollHeight;i&&u.value>s.value.length&&!g.value&&await t.dispatch("gallery/initUserGalleryItems",{userId:d.value,options:{title:a.value,coloristicType:v.value?.coloristicType?.id,maskType:v.value?.maskType?.type,folderId:v.value?.folder?.id,lastDoc:p.value}});const r=o>=l.scrollHeight-20;r||(n>w?C.value=!0:n<w&&(C.value=!1)),w=n<=0?0:n};(0,o.wB)(a,e=>{I&&clearTimeout(I),I=setTimeout(()=>{t.dispatch("gallery/initUserGalleryItems",{userId:d.value,options:{title:e,...v},reset:!0})},300)}),(0,o.wB)(y,e=>{t.dispatch("gallery/setSelectedMode",e)}),(0,o.wB)(k,e=>{e?(t.dispatch("gallery/setSelectedMode",!0),t.dispatch("gallery/setSelectedAll",s.value)):t.dispatch("gallery/clearSelected")});const _=async()=>{await E(xl,{text:e("dyrAllDeleted"),title:e("delete")}).then(e=>{e&&t.dispatch("gallery/deleteImagesFromGallery",m.value.map(e=>e.id))})},R=()=>{t.dispatch("gallery/clearSelected")},S=()=>{b.value=!0},T=e=>s.value.findIndex(t=>t.id===e.id),A=(0,o.EW)(()=>f.value&&C.value?"calc(100dvh - var(--header-height) - 5px)":C.value?"calc(100dvh - var(--header-height) - 25px)":"calc(100dvh - var(--header-height) - 135px)");return{images:s,currentIndex:c,openCardModal:L,isLoading:g,totalImages:u,imagesContainer:l,onScroll:F,search:a,openFilterModal:M,isFilterEmpty:h,t:e,isSelectedMode:y,selected:m,openDeleteModal:_,clearSelected:R,chooseAll:k,isMobile:f,openPopover:S,visiblePopover:b,isHidden:C,getCurrentIndex:T,heightImagesContainer:A}}});const Fn=(0,h.A)(Mn,[["render",Rs],["__scopeId","data-v-721e6b94"]]);var _n=Fn;const Rn={class:"chroma-wrapper"},Sn={class:"photo-picker"},Tn={key:1,class:"viewer-wrap"},An=["src"],xn={class:"info-row"},Pn={class:"values"},Wn={key:0,class:"upload-btn"},Kn={ref:"hiddenCanvas",class:"hidden-canvas","aria-hidden":"true"};function Dn(e,t,a,s,n,i){const r=(0,o.g2)("app-image-not-uploaded"),d=(0,o.g2)("app-file-uploader"),u=(0,o.g2)("app-color-picker");return(0,o.uX)(),(0,o.CE)("div",Rn,[(0,o.Lk)("div",Sn,[e.imageUrl?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(r,{key:0,onOnFileSelected:e.onFileSelected},null,8,["onOnFileSelected"])),e.imageUrl?((0,o.uX)(),(0,o.CE)("div",Tn,[(0,o.Lk)("div",{ref:"imageFrame",class:"image-frame",onPointerdown:t[0]||(t[0]=(0,l.D$)((...t)=>e.onImagePointerDown&&e.onImagePointerDown(...t),["prevent"]))},[(0,o.Lk)("img",{ref:"imgEl",src:e.imageUrl,alt:"uploaded",draggable:"false"},null,8,An),(0,o.Lk)("div",{class:"cursor",style:(0,c.Tr)({left:e.cursorX+"px",top:e.cursorY+"px"}),"aria-hidden":"true"},null,4)],544),(0,o.Lk)("div",xn,[(0,o.Lk)("section",null,[(0,o.Lk)("div",{class:"swatch",style:(0,c.Tr)({background:e.currentHex})},null,4),(0,o.Lk)("div",Pn,[(0,o.Lk)("div",null,[t[1]||(t[1]=(0,o.Lk)("strong",null,"RGB:",-1)),(0,o.eW)(" "+(0,c.v_)(e.currentRgb.join(", ")),1)]),(0,o.Lk)("div",null,[t[2]||(t[2]=(0,o.Lk)("strong",null,"Luminance:",-1)),(0,o.eW)(" "+(0,c.v_)(e.luminance),1)]),(0,o.Lk)("div",null,[t[3]||(t[3]=(0,o.Lk)("strong",null,"HEX:",-1)),(0,o.eW)(" "+(0,c.v_)(e.currentHex),1)])])]),e.imageUrl?((0,o.uX)(),(0,o.CE)("div",Wn,[(0,o.bF)(d,{"is-show-sign":!1,"is-title":!1,onSelect:e.onFileSelected},null,8,["onSelect"])])):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0),(0,o.Lk)("canvas",Kn,null,512)]),(0,o.bF)(u,{"hex-p":e.selectedHex},null,8,["hex-p"])])}var Xn=a(6353);const Bn={class:"color-picker"},Vn={class:"preview-row"},Un={class:"controls"},On={class:"info"},Gn={class:"combos"},zn={class:"row"},Qn={class:"label"},jn={class:"row"};function Hn(e,t,a,s,n,i){const r=(0,o.g2)("app-input");return(0,o.uX)(),(0,o.CE)("div",Bn,[(0,o.Lk)("div",Vn,[(0,o.Lk)("div",{class:"preview",style:(0,c.Tr)({background:e.hex}),"aria-hidden":"true"},null,4),(0,o.bF)(r,{modelValue:e.hex,"onUpdate:modelValue":t[0]||(t[0]=t=>e.hex=t),"is-label":!1},null,8,["modelValue"])]),(0,o.Lk)("div",Un,[(0,o.Lk)("div",{ref:"svEl",class:"sv",style:(0,c.Tr)({background:e.svBackground}),onPointerdown:t[1]||(t[1]=(0,l.D$)((...t)=>e.onSvPointerDown&&e.onSvPointerDown(...t),["prevent"]))},[t[3]||(t[3]=(0,o.Lk)("div",{class:"sv-overlay"},null,-1)),(0,o.Lk)("div",{class:"sv-cursor",style:(0,c.Tr)(e.svCursorStyle),"aria-hidden":"true"},null,4)],36),(0,o.Lk)("div",{ref:"hueEl",class:"hue",onPointerdown:t[2]||(t[2]=(0,l.D$)((...t)=>e.onHuePointerDown&&e.onHuePointerDown(...t),["prevent"]))},[(0,o.Lk)("div",{class:"hue-cursor",style:(0,c.Tr)(e.hueCursorStyle),"aria-hidden":"true"},null,4)],544)]),(0,o.Lk)("div",On,[(0,o.Lk)("div",null,[t[4]||(t[4]=(0,o.Lk)("strong",null,"HEX:",-1)),(0,o.eW)(" "+(0,c.v_)(e.hex),1)]),(0,o.Lk)("div",null,[t[5]||(t[5]=(0,o.Lk)("strong",null,"RGB:",-1)),(0,o.eW)(" "+(0,c.v_)(e.rgb.join(", ")),1)])]),(0,o.Lk)("section",Gn,[(0,o.Lk)("h4",null,(0,c.v_)(e.t("combinations")),1),(0,o.Lk)("div",zn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.combos,e=>((0,o.uX)(),(0,o.CE)("div",{key:e.label,class:"combo"},[(0,o.Lk)("div",{class:"swatch",style:(0,c.Tr)({background:e.color})},null,4),(0,o.Lk)("div",Qn,(0,c.v_)(e.label)+" — "+(0,c.v_)(e.color),1)]))),128))]),(0,o.Lk)("h4",null,(0,c.v_)(e.t("scale")),1),(0,o.Lk)("div",jn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.scaleColors,e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"swatch",style:(0,c.Tr)({background:e})},null,4))),128))])])])}var Nn=(0,o.pM)({components:{AppInput:pe},props:{hexP:{type:String,default:"#D4F880"}},setup(e){const{t:t}=(0,r.s9)(),a=(0,n.KR)(e.hexP),l=(0,n.KR)((0,Xn.Ay)(a.value).hsl()[0]??0),s=(0,n.KR)((0,Xn.Ay)(a.value).hsl()[1]??1),i=(0,n.KR)((0,Xn.Ay)(a.value).hsl()[2]??.5),c=(0,n.KR)(null),d=(0,n.KR)(null);(0,o.wB)(()=>e.hexP,e=>{a.value=e},{immediate:!1});const u=(0,o.EW)(()=>Xn.Ay.valid(a.value)?(0,Xn.Ay)(a.value):(0,Xn.Ay)("#000")),p=(0,o.EW)(()=>u.value.rgb()),g=(0,o.EW)(()=>Xn.Ay.hsl(l.value,1,.5).hex()),v=(0,o.EW)(()=>({left:`${(100*s.value).toFixed(2)}%`,top:`${(100*(1-i.value)).toFixed(2)}%`,transform:"translate(-50%,-50%)"})),m=(0,o.EW)(()=>({left:`${(l.value%360/360*100).toFixed(2)}%`,transform:"translateX(-50%)"})),h=(0,o.EW)(()=>{const e=u.value.hsl()[0]??0,t=u.value.hsl()[1],a=u.value.hsl()[2];return[{label:"Complement",color:Xn.Ay.hsl((e+180)%360,t,a).hex()},{label:"Analog -30",color:Xn.Ay.hsl((e-30+360)%360,t,a).hex()},{label:"Analog +30",color:Xn.Ay.hsl((e+30)%360,t,a).hex()},{label:"Triad 1",color:Xn.Ay.hsl((e+120)%360,t,a).hex()},{label:"Triad 2",color:Xn.Ay.hsl((e+240)%360,t,a).hex()}]}),f=(0,o.EW)(()=>{const e=Xn.Ay.valid(a.value)?a.value:"#000";return Xn.Ay.scale([e,(0,Xn.Ay)(e).darken(2)]).mode("lab").colors(5)}),y=()=>{const e=Xn.Ay.hsv(l.value,s.value,i.value);a.value=e.hex()},k=()=>{if(Xn.Ay.valid(a.value)){const e=(0,Xn.Ay)(a.value).hsl();l.value=e[0]??0,s.value=e[1]??1,i.value=e[2]??.5}};let b=!1;const C=(e,t)=>{const a=c.value;if(!a)return;const l=a.getBoundingClientRect(),o=Math.min(Math.max(0,e-l.left),l.width),n=Math.min(Math.max(0,t-l.top),l.height);s.value=o/l.width,i.value=1-n/l.height,y()},w=e=>{b=!0,c.value?.setPointerCapture?.(e.pointerId),C(e.clientX,e.clientY),window.addEventListener("pointermove",E),window.addEventListener("pointerup",I,{once:!0})},E=e=>{b&&C(e.clientX,e.clientY)},I=e=>{b=!1,c.value?.releasePointerCapture?.(e.pointerId),window.removeEventListener("pointermove",E),window.removeEventListener("pointerup",I)};let L=!1;const M=e=>{const t=d.value;if(!t)return;const a=t.getBoundingClientRect(),o=Math.min(Math.max(0,e-a.left),a.width);l.value=o/a.width*360,y()},F=e=>{L=!0,d.value?.setPointerCapture?.(e.pointerId),M(e.clientX),window.addEventListener("pointermove",_),window.addEventListener("pointerup",R,{once:!0})},_=e=>{L&&M(e.clientX)},R=e=>{L=!1,d.value?.releasePointerCapture?.(e.pointerId),window.removeEventListener("pointermove",_),window.removeEventListener("pointerup",R)};return(0,o.xo)(()=>{window.removeEventListener("pointermove",E),window.removeEventListener("pointerup",I),window.removeEventListener("pointermove",_),window.removeEventListener("pointerup",R)}),(0,o.sV)(async()=>{await(0,o.dY)(),k()}),{hex:a,hue:l,sat:s,val:i,svEl:c,hueEl:d,color:u,rgb:p,svBackground:g,svCursorStyle:v,hueCursorStyle:m,onSvPointerDown:w,onHuePointerDown:F,combos:h,scaleColors:f,t:t}}});const $n=(0,h.A)(Nn,[["render",Hn],["__scopeId","data-v-e540f4a6"]]);var Yn=$n;const qn={class:"image-placeholder",role:"button",tabindex:"0","aria-label":"Загрузить фото"},Jn={class:"placeholder-inner"},Zn={class:"placeholder-text"};function ei(e,t,a,l,s,n){const i=(0,o.g2)("app-file-uploader");return(0,o.uX)(),(0,o.CE)("div",qn,[(0,o.Lk)("div",Jn,[t[0]||(t[0]=(0,o.Lk)("svg",{class:"placeholder-icon",width:"48",height:"48",viewBox:"0 0 24 24","aria-hidden":"true"},[(0,o.Lk)("path",{fill:"currentColor",d:"M5 20h14V8l-4-4H5v16zm2-9l2.5 3 3.5-4.5L17 17H7l0-6z"})],-1)),(0,o.Lk)("div",Zn,(0,c.v_)(e.t("photoNotUploaded")),1),(0,o.bF)(i,{"is-show-sign":!1,onSelect:e.onFileSelected},null,8,["onSelect"])])])}var ti=(0,o.pM)({components:{AppFileUploader:lo},emits:["onFileSelected"],setup(e,{emit:t}){const{t:a}=(0,r.s9)(),l=e=>{t("onFileSelected",e)};return{t:a,onFileSelected:l}}});const ai=(0,h.A)(ti,[["render",ei],["__scopeId","data-v-727bf138"]]);var li=ai,oi=(0,o.pM)({components:{AppImageNotUploaded:li,AppColorPicker:Yn,AppFileUploader:lo},setup(){const e=(0,i.Pj)(),t=(0,n.KR)(null),a=(0,n.KR)(null),l=(0,n.KR)(null),s=(0,n.KR)(null),r=(0,n.KR)(null),c=(0,n.KR)(0),d=(0,n.KR)(0),u=(0,n.KR)(!1),p=(0,n.KR)(100),g=(0,n.KR)(100),v=(0,n.KR)([0,0,0]),m=(0,n.KR)("#D4F880"),h=(0,n.KR)("#D4F880"),f=(0,n.KR)(0),y=(0,o.EW)(()=>"mobile"===e.getters["mobile/breakPoint"]),k=y.value?360:400,b=y.value?450:500;let C=!1,w=null;const E=e=>{if(!e)return;const t=URL.createObjectURL(e);I(t)},I=e=>{r.value&&URL.revokeObjectURL(r.value),r.value=e,(0,o.dY)(()=>{a.value&&(a.value.onload=()=>{c.value=a.value.naturalWidth,d.value=a.value.naturalHeight,L()},a.value.complete&&(c.value=a.value.naturalWidth,d.value=a.value.naturalHeight,L()))})},L=()=>{const e=a.value,t=s.value;if(!e||!t)return;const o=window.devicePixelRatio||1,n=Math.round(k*o),i=Math.round(b*o);t.width=n,t.height=i,t.style.width=`${k}px`,t.style.height=`${b}px`;const r=t.getContext("2d");if(!r)return;r.setTransform(o,0,0,o,0,0),r.clearRect(0,0,k,b);const c=e.naturalWidth,d=e.naturalHeight;if(!c||!d)return;const u=c/d,p=k/b;let g,v;u>p?(g=k,v=Math.round(k/u)):(v=b,g=Math.round(b*u));const m=Math.round((k-g)/2),h=Math.round((b-v)/2);l.value&&(l.value.style.width=`${g}px`,l.value.style.height=`${v}px`),r.drawImage(e,0,0,c,d,m,h,g,v),t.__meta={mode:"contain",cssW:k,cssH:b,drawW:g,drawH:v,offsetX:m,offsetY:h,dpr:o,natW:c,natH:d}},M=(e,t)=>{const o=l.value,n=a.value,i=s.value;if(!o||!n||!i)return null;const r=n.getBoundingClientRect(),c=e-r.left,d=t-r.top,u=Math.min(Math.max(0,c),r.width),p=Math.min(Math.max(0,d),r.height),g=Math.round(u/r.width*i.width),v=Math.round(p/r.height*i.height);return{px:g,py:v,clientX:u+r.left,clientY:p+r.top}},F=(e,t)=>{const a=M(e,t);if(!a)return;const l=s.value,o=l.getContext("2d");if(!o)return;const{px:n,py:i}=a;if(n<0||i<0||n>=l.width||i>=l.height)return;const r=o.getImageData(n,i,1,1).data,c=r[0],d=r[1],u=r[2];v.value=[c,d,u],m.value=_(c,d,u),h.value=m.value;try{f.value=Number((0,Xn.Ay)(m.value).luminance().toFixed(3))}catch{f.value=0}return a},_=(e,t,a)=>("#"+[e,t,a].map(e=>{const t=e.toString(16);return 1===t.length?"0"+t:t}).join("")).toUpperCase(),R=e=>{C=!0,w=e.pointerId,l.value?.setPointerCapture?.(e.pointerId),S(e.clientX,e.clientY);const t=F(e.clientX,e.clientY);t&&(window.addEventListener("pointermove",T),window.addEventListener("pointerup",A,{once:!0}),window.addEventListener("pointercancel",A,{once:!0}))},S=(e,t)=>{const o=a.value,s=l.value;if(!o||!s)return;const n=o.getBoundingClientRect(),i=Math.max(0,Math.min(n.width,e-n.left)),r=Math.max(0,Math.min(n.height,t-n.top)),c=s.getBoundingClientRect();p.value=i+(n.left-c.left),g.value=r+(n.top-c.top),u.value=!0},T=e=>{if(!C)return;S(e.clientX,e.clientY);F(e.clientX,e.clientY)},A=()=>{C=!1,null!==w&&(l.value?.releasePointerCapture?.(w),w=null),window.removeEventListener("pointermove",T),window.removeEventListener("pointerup",A),window.removeEventListener("pointercancel",A)};return(0,o.xo)(()=>{window.removeEventListener("pointermove",T),window.removeEventListener("pointerup",A),window.removeEventListener("pointercancel",A)}),{fileInput:t,imgEl:a,imageFrame:l,hiddenCanvas:s,imageUrl:r,currentRgb:v,currentHex:m,luminance:f,showCursor:u,cursorX:p,cursorY:g,selectedHex:h,onFileSelected:E,onImagePointerDown:R}}});const si=(0,h.A)(oi,[["render",Dn],["__scopeId","data-v-276cb089"]]);var ni=si;const ii=[{path:"/",name:"auth",component:xe,redirect:"/login",children:[{path:"login",name:"login",component:lt},{path:"forgot",name:"forgot",component:it}]},{path:"/main",name:"main",component:Kt,redirect:"/main/color",meta:{requiresAuth:!0},children:[{path:"color",name:"color",component:ns,meta:{requiresAuth:!0}},{path:"chroma",name:"chroma",component:ni,meta:{requiresAuth:!0}},{path:"gallery",name:"gallery",component:_n,meta:{requiresAuth:!0}}]}],ri=(0,T.aE)({history:(0,T.Bt)("/RM_Rainbow-Manager/"),routes:ii});ri.beforeEach((e,t,a)=>{const l=ys.getters["authFirebase/isAuthenticated"];e.matched.some(e=>e.meta.requiresAuth)?l?a():a({name:"login"}):"login"===e.name&&l?a({name:"color"}):a()});var ci=ri,di=a(8950),ui=a(2353),pi=a(292);const gi={en:{login:"Login",email:"Email",password:"Password",forgot:"Forgot",userName:"Username",incorrectLoginPassword:"Incorrect login or password",userNotFound:"User not found",validation:{required:"This field is required",email:"Invalid email address",min:"Minimum {count} characters"},colorType:"Color type",gallery:"Gallery",upload:"Upload",mask:"Mask",collage:"Collage",logout:"Logout",saveToGallery:"Save to gallery",download:"Download",addSign:"Add Sign",shareImageWithCollage:"Share image with collage",shareImageWithMask:"Share image with mask",rememberChoose:"Remember choose",successImage:"Image uploaded",errorImage:"Error image uploaded",addFolder:"Add folder",delete:"Delete",newFolder:"New folder",nameFolder:"name folder",choose:"Choose",chooseAll:"Choose all",edit:"Edit",cancel:"Cancel",ok:"Ок",search:"search",dywDelete:"Do you want delete 1 element?",dyrAllDeleted:"Do you really want to delete the selected items?",clear:"Clear",apply:"Apply",folder:"Folder",total:"Total",photo:"Photo",update:"Update",copyLink:"Copy link",noName:"No name",settings:"Settings",successFolderCreate:"Create folder",successDeleteFolder:"Delete folder",takePhoto:"Take a photo",characteristicColor:"Colors",photoNotUploaded:"Photo not uploaded",combinations:"Combinations",scale:"Scale"},ru:{login:"Вход",email:"Почта",password:"Пароль",forgot:"Забыли",userName:"Имя пользователя",incorrectLoginPassword:"Неверный логин или пароль",userNotFound:"Пользователь не найден",validation:{required:"Поле обязательно",email:"Некорректный email",min:"Минимум {count} символов"},colorType:"Колористика",gallery:"Галерея",upload:"Загрузить",mask:"Маска",collage:"Коллаж",logout:"Выйти",saveToGallery:"Сохранить в галерею",download:"Скачать",addSign:"Добавить подпись",shareImageWithCollage:"Показывать в коллаже",shareImageWithMask:"Показывать в маске",rememberChoose:"Запомнить",successImage:"Изображение загружено",errorImage:"Ошибка при загрузке изображения",addFolder:"Добавить папку",delete:"Удалить",newFolder:"Новая папка",choose:"Выбрать",chooseAll:"Выбрать все",edit:"Исправить",cancel:"Отменить",ok:"Ок",search:"поиск",nameFolder:"название папки",dywDelete:"Удалить 1 элемент?",dyrAllDeleted:"Вы уверены, что хотите удалить выбранные элементы?",clear:"Очистить",apply:"Применить",folder:"Папка",total:"Всего",photo:"Фото",update:"Обновить",copyLink:"Скопировать ссылку",noName:"Без названия",settings:"Настройки",successFolderCreate:"Папка добавлена",successDeleteFolder:"Папка удалена",takePhoto:"Фото",characteristicColor:"Цвета",photoNotUploaded:"Фото не загружено",combinations:"Сочетание",scale:"Шкала"}},vi=(0,r.hU)({locale:"en",fallbackLocale:"ru",messages:gi});di.Yv.add(ui.MjD,ui.mRM,ui.SGM,ui.s0Q,ui.iW_,ui.zpE,ui.DW4,ui.M9Z,ui.y_8,ui.N72,ui.U23,ui.hSh,ui.QLR,ui.EZy,ui.yBu,ui.CeG,ui.dmS,ui.S7o,ui.yvG,ui.nx5,ui.vHW,ui.m1c,ui.zLW,ui.GRI,ui.s0Q,ui.yLS,ui.KIu,ui.ao0,ui.jPR,ui.CQO,ui.pyI,ui.e68,ui.Tsj,ui.t5Z,ui.dB,ui.BH7,ui._$s,ui.cbP,ui.rwq,ui.jC5),(0,ra.hg)(ga,e=>{ys.commit("authFirebase/setUser",e)}),(0,l.Ef)(S).use(ys).use(ci).use(vi).component("font-awesome-icon",pi.gc).mount("#app")}},t={};function a(l){var o=t[l];if(void 0!==o)return o.exports;var s=t[l]={exports:{}};return e[l].call(s.exports,s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,l,o,s){if(!l){var n=1/0;for(d=0;d<e.length;d++){l=e[d][0],o=e[d][1],s=e[d][2];for(var i=!0,r=0;r<l.length;r++)(!1&s||n>=s)&&Object.keys(a.O).every(function(e){return a.O[e](l[r])})?l.splice(r--,1):(i=!1,s<n&&(n=s));if(i){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[l,o,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.p="/RM_Rainbow-Manager/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var o,s,n=l[0],i=l[1],r=l[2],c=0;if(n.some(function(t){return 0!==e[t]})){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(r)var d=r(a)}for(t&&t(l);c<n.length;c++)s=n[c],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(d)},l=self["webpackChunkvue_exeample"]=self["webpackChunkvue_exeample"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[504],function(){return a(6298)});l=a.O(l)})();
//# sourceMappingURL=app.413e7afc.js.map